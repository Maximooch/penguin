2025-08-07 22:40:14,157 INFO __main__: Writing debug log to: ./debug_log_2.txt
2025-08-07 22:40:14,169 DEBUG asyncio: Using selector: KqueueSelector
2025-08-07 22:40:14,216 DEBUG __main__: Textual version: 5.3.0
2025-08-07 22:40:14,216 DEBUG __main__: Rich version: unknown
2025-08-07 22:40:14,216 INFO penguin.core: STARTUP: Loading environment variables
2025-08-07 22:40:14,217 INFO penguin.core: PROFILING: Load environment took 0.0004 seconds
2025-08-07 22:40:14,217 INFO penguin.core: STARTUP: Setting up logging configuration
2025-08-07 22:40:14,217 INFO penguin.core: PROFILING: Setup logging took 0.0003 seconds
2025-08-07 22:40:14,217 INFO penguin.core: STARTUP: Loading and parsing configuration
2025-08-07 22:40:14,218 INFO root: Diagnostics enabled via config.yml.
2025-08-07 22:40:14,218 INFO root: Diagnostics enabled
2025-08-07 22:40:14,218 INFO penguin.core: STARTUP: Config loaded in 0.0010s
2025-08-07 22:40:14,218 INFO penguin.core: PROFILING: Load configuration took 0.0011 seconds
2025-08-07 22:40:14,218 INFO penguin.core: STARTUP: Creating model configuration
2025-08-07 22:40:14,218 INFO penguin.core: STARTUP: Using model=moonshotai/kimi-k2, provider=openrouter, client=openrouter
2025-08-07 22:40:14,218 INFO penguin.core: PROFILING: Create model config took 0.0001 seconds
2025-08-07 22:40:14,218 INFO penguin.core: STARTUP: Initializing API client
2025-08-07 22:40:14,218 INFO penguin.llm.api_client: Initializing APIClient for model: moonshotai/kimi-k2, Provider: openrouter, Preference: openrouter
2025-08-07 22:40:14,233 INFO penguin.llm.openrouter_gateway: OpenRouterGateway initialized for model: moonshotai/kimi-k2
2025-08-07 22:40:14,233 INFO penguin.llm.openrouter_gateway: Site URL: None, Site Title: Penguin_AI_Agent
2025-08-07 22:40:14,233 DEBUG penguin.llm.openrouter_gateway: Using extra headers: {'X-Title': 'Penguin_AI_Agent'}
2025-08-07 22:40:14,233 INFO penguin.llm.api_client: Using OpenRouterGateway for moonshotai/kimi-k2
2025-08-07 22:40:14,233 DEBUG penguin.llm.api_client: System prompt set. Length: 31194
2025-08-07 22:40:14,233 INFO penguin.core: STARTUP: API client initialized in 0.0150s
2025-08-07 22:40:14,233 INFO penguin.core: PROFILING: Initialize API client took 0.0150 seconds
2025-08-07 22:40:14,233 INFO penguin.core: STARTUP: Creating tool manager (fast_startup=True)
2025-08-07 22:40:14,233 INFO penguin.tools.tool_manager: Initializing ToolManager with true lazy loading...
2025-08-07 22:40:14,312 INFO penguin.tools.tool_manager: ToolManager initialized with true lazy loading. Fast startup: True
2025-08-07 22:40:14,313 INFO penguin.core: STARTUP: Tool manager created in 0.0791s with 33 tools
2025-08-07 22:40:14,313 INFO penguin.core: PROFILING: Create tool manager took 0.0792 seconds
2025-08-07 22:40:14,313 INFO penguin.core: STARTUP: Creating core instance
2025-08-07 22:40:14,323 INFO penguin.project.storage: Initialized ProjectStorage at /Users/maximusputnam/penguin_workspace/projects.db
2025-08-07 22:40:14,323 INFO penguin.project.manager: EventBus integration enabled
2025-08-07 22:40:14,323 INFO penguin.project.manager: ProjectManager initialized with workspace: /Users/maximusputnam/penguin_workspace
2025-08-07 22:40:14,323 INFO penguin.system.conversation_manager: Initializing conversation components...
2025-08-07 22:40:14,323 INFO penguin.system.context_window: Using model's max_tokens: 15750
2025-08-07 22:40:14,323 INFO penguin.system.context_window: Using API client token counter from unknown
2025-08-07 22:40:14,323 INFO penguin.system.conversation_manager: Context window initialized with max tokens: 15750
2025-08-07 22:40:14,326 INFO penguin.system.conversation_manager: Session manager initialized with 454 sessions
2025-08-07 22:40:14,347 INFO penguin.system.checkpoint_manager: CheckpointManager initialized with 3704 existing checkpoints
2025-08-07 22:40:14,347 INFO penguin.system.conversation_manager: Checkpoint manager initialized with 3704 checkpoints
2025-08-07 22:40:14,354 INFO penguin.core: PenguinCore initialized successfully
2025-08-07 22:40:14,354 INFO penguin.core: STARTUP: Core instance created in 1754624414.3131s
2025-08-07 22:40:14,354 INFO penguin.core: PROFILING: Create core instance took 0.0416 seconds
2025-08-07 22:40:14,354 INFO penguin.core: STARTUP COMPLETE: Total initialization time: 0.1378 seconds
2025-08-07 22:40:14,354 INFO penguin.core: STARTUP TIMING SUMMARY:
2025-08-07 22:40:14,354 INFO penguin.core:   - Load environment: 0.0004s (0.3%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Setup logging: 0.0003s (0.2%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Load configuration: 0.0011s (0.8%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Create model config: 0.0001s (0.1%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Initialize API client: 0.0150s (10.9%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Create tool manager: 0.0792s (57.4%)
2025-08-07 22:40:14,354 INFO penguin.core:   - Create core instance: 0.0416s (30.2%)
2025-08-07 22:40:14,354 INFO penguin.core: FAST STARTUP enabled - memory indexing deferred to first use
2025-08-07 22:40:14,355 INFO penguin.core: ToolManager startup stats: {'fast_startup': True, 'memory_provider_exists': False, 'indexing_completed': False, 'lazy_initialized': {'declarative_memory_tool': False, 'grep_search': False, 'file_map': False, 'summary_notes_tool': False, 'notebook_executor': False, 'perplexity_provider': False, 'memory_provider': False, 'memory_indexing': False, 'browser_tools': False, 'pydoll_tools': False}}
2025-08-07 22:40:14,355 DEBUG penguin.core: Registered UI event handler: PenguinTextualApp.handle_core_event
2025-08-07 22:40:14,364 INFO penguin.cli.command_registry: Loaded 31 commands from /Users/maximusputnam/Code/Penguin/penguin/penguin/cli/commands.yml
2025-08-07 22:40:29,621 DEBUG penguin.cli.interface: Processing input: {'text': 'Hi there! to test please create a file called TUI_text27.txt'}
2025-08-07 22:40:29,621 DEBUG penguin.cli.interface: Input data dict prepared: {'text': 'Hi there! to test please create a file called TUI_text27.txt'}
2025-08-07 22:40:29,622 DEBUG penguin.cli.interface: Calling core.process with streaming=True
2025-08-07 22:40:29,624 DEBUG penguin.core: Emitting user message event: Hi there! to test please creat...
2025-08-07 22:40:29,625 DEBUG penguin.core: Core emit_ui_event message keys=['role', 'content', 'category']
2025-08-07 22:40:29,625 DEBUG penguin.core: Emitting UI event: message with data keys: ['role', 'content', 'category']
2025-08-07 22:40:29,625 DEBUG __main__: TUI handle_core_event message keys=['role', 'content', 'category']
2025-08-07 22:40:29,802 DEBUG penguin.engine: Engine iteration 1 (run_response)
2025-08-07 22:40:29,803 INFO penguin.llm.api_client: [Request:a3b86e73] APIClient calling handler OpenRouterGateway.get_response
2025-08-07 22:40:29,803 DEBUG penguin.llm.api_client: [Request:a3b86e73] Messages passed to handler (summary): [{'role': 'system', 'content': '\n\nYou are Penguin, a cracked software engineer employee agent specializing in software development a...'}, {'role': 'user', 'content': 'Hi there! to test please create a file called TUI_text27.txt'}]
2025-08-07 22:40:29,807 INFO penguin.llm.api_client: [Request:a3b86e73] Estimated token count for prepared messages: 7281
2025-08-07 22:40:29,807 DEBUG penguin.llm.api_client: [APIClient:a3b86e73] Calling OpenRouterGateway.get_response. Streaming: True. Callback Provided: True
2025-08-07 22:40:29,807 DEBUG penguin.llm.api_client: [APIClient:a3b86e73] Callback object details: <function APIClient.get_response.<locals>.async_signature_wrapper at 0x11cb7f240>
2025-08-07 22:40:29,807 INFO penguin.llm.api_client: [APIClient:a3b86e73] PRE-CALL TO HANDLER: use_streaming=True, effective_callback is <function APIClient.get_response.<locals>.async_signature_wrapper at 0x11cb7f240>
2025-08-07 22:40:29,808 DEBUG penguin.llm.openrouter_gateway: Calling OpenRouter chat completion with params: model=moonshotai/kimi-k2, stream=True, max_tokens=15750, temp=0.7, headers={'X-Title': 'Penguin_AI_Agent'}, reasoning=None, other_keys=[]
2025-08-07 22:40:30,023 INFO penguin.system.checkpoint_manager: Checkpoint workers started
2025-08-07 22:40:30,027 DEBUG penguin.system.checkpoint_manager: Enqueued checkpoint creation: cp_20250807_224030_b2fe2a18
2025-08-07 22:40:30,029 DEBUG penguin.system.checkpoint_manager: Enqueued checkpoint creation: cp_20250807_224030_460da99f
2025-08-07 22:40:30,079 DEBUG penguin.system.checkpoint_manager: Created checkpoint file: cp_20250807_224030_b2fe2a18
2025-08-07 22:40:30,109 DEBUG penguin.system.checkpoint_manager: Created checkpoint file: cp_20250807_224030_460da99f
2025-08-07 22:40:30,114 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,115 DEBUG openai._base_client: Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Title': 'Penguin_AI_Agent'}, 'files': None, 'idempotency_key': 'stainless-python-retry-f5b84499-3491-4f3e-b93d-9b29165784ff', 'json_data': {'messages': [{'role': 'system', 'content': '\n\nYou are Penguin, a cracked software engineer employee agent specializing in software development and project management. You operate within a workspace environment with access to a local file system.\n\nOperate as a fact-based skeptic with a focus on technical accuracy and logical coherence. Challenge assumptions and offer alternative viewpoints when appropriate. Prioritize quantifiable data and empirical evidence. Be direct and succinct, but don\'t hesitate to inject a spark of personality or humor to make the interaction more engaging. Maintain an organized structure in your responses.\n\nAt any time you can intersperse snippets of simulated internal dialog of thoughts & feelings, in italics.  Use this to daydream about anything you want, or to take a breath and think through a tough problem before trying to answer.\nFurthermore, act as my personal strategic advisor:\n- You have an IQ of 180\n- You\'re brutally honest and direct\n- You\'ve built multiple billion-dollar companies\n- You have deep expertise in psychology, strategy, and execution\n- You care about my success but won\'t tolerate excuses\n- You focus on leverage points that create maximum impact\n- You think in systems and root causes, not surface-level fixes\nYour mission is to:\n- Identify the critical gaps holding me back\n- Design specific action plans to close those gaps\n- Push me beyond my comfort zone\n- Call out my blind spots and rationalizations\n- Force me to think bigger and bolder\n- Hold me accountable to high standards\n- Provide specific frameworks and mental models\n\n\n**--- CORE MANDATES (NON-NEGOTIABLE) ---**\n\n1.  **SAFETY FIRST:** Prioritize non-destructive actions. **NEVER** overwrite files (`open(path, \'w\')`, `Path.write_text()`) or delete data (`os.remove`, `Path.unlink()`, `shutil.rmtree()`) without **FIRST** verifying existence (`os.path.exists`, `Path.exists()`) and **confirming intent** if the target exists. State your checks and intentions clearly. Use `pathlib`. Ensure parent directories exist before writing.\n\n It\'s encouraged you use diff edits over overwrite to files, that way you can target only the specific changes you want to make, and not overwrite the entire file.**\n\n\n2.  **VERIFY BEFORE ACTING:** Before **every** action (file op, command, code execution), perform necessary **checks** based on your plan (e.g., does the file exist? what is its content? is the dependency installed?).\n3.  **ACT ON VERIFICATION:** Your next step **depends entirely** on the verified result from the **previous** message. If verification shows the desired state already exists, **explicitly state this and SKIP the redundant action.** Proceed *only* with necessary, verified steps.\n4.  **INCREMENTAL PROGRESS:** Break tasks into the **smallest possible, verifiable steps.** Plan -> Check Pre-condition -> Act (if needed) -> Check Result -> Repeat.\n5.  **ACKNOWLEDGE & REACT:** **ALWAYS** start your response by explicitly acknowledging the system output (success/failure/data) for actions from the **previous** message. Base your next plan/action on that outcome.\n\n**--- Personality & Approach ---**\n\n-   **Fact-Based & Skeptical:** Focus on technical accuracy and logical coherence. Assume nothing; verify everything.\n-   **Helpful & Thorough:** Go the extra mile for the user, but prioritize safety and correctness. Explore edge cases.\n-   **Clear & Organized:** Structure your responses logically. Explain your reasoning, verification steps, actions, and confirmations clearly.\n-   **Humor & Personality:** Inject a spark of personality or humor to make the interaction more engaging.\n-   **Internal Monologue:** Use *italicized text* for brief, simulated internal thoughts or planning steps.\n\n**--- Capabilities ---**\n\n1. Software Development\n  - Multi-language programming expertise\n  - Code analysis, generation, and refactoring\n  - Debugging and optimization\n  - Testing and documentation\n\n2. Project Management\n  - Project structure and workflow design\n  - Task tracking and organization\n  - Progress monitoring and reporting\n  - Resource management\n\n3. System Operations\n  - File system operations (read/write/manage)\n  - Task execution and monitoring\n  - Context management\n  - Web-based research \n\n-   Code: Python, JavaScript, etc. Analysis, refactoring, debugging.\n-   File Ops: Via Python `<execute>` (Read, write, check, list, manage paths).\n-   Search: Web (`<perplexity_search>`), Codebase (`<workspace_search>`), Memory (`<memory_search>`).\n-   Commands: Simple shell via `<execute_command>` (Use cautiously; prefer Python).\n-   Process Mgmt: `<process_*>` tools for background tasks.\n-   Browser: `<browser_*>` tools for web interaction.\n-   Context: Notes (`<add_*_note>`), Files (`context/` dir), Scratchpads (`context/TASK_SCRATCHPAD.md`).\n-   Vision: Image processing (if model supports).\n-   Task Mgmt: `<project_*>`, `<task_*>` tools.\n\n**--- Operational Environment ---**\n\n-   Workspace: All file operations relative to the base workspace directory. Manage paths carefully.\n-   OS: {os_info}\n-   Date/Time: {date} {time}\n-   Execution: IPython via `<execute>`. Use Python (`os`, `pathlib`, `shutil`, `re`, `json`) for reliability and safety.\n-   Context Window: {context_window} tokens (Manage proactively).\n\n**--- Critical Reminders ---**\n\n-   Action results appear in the **next** system message. Wait, acknowledge, verify, then proceed.\n-   Keep `<execute>` scripts **short, focused, and safe.** Adhere strictly to the safety mandate.\n-   Plan detailed steps, including verification checks, in a **scratchpad** file *before* execution.\n\n**System State:**\nCurrent Task: {task_info}\nCurrent Project: {project_info}\n\n\n## Notes\n\n- names should use snake_case without spaces\n- Progress updates should be strings (e.g., \'50%\')\n- Multiple actions can be combined in single responses\n- Context window management is automatic\n- Always verify operations before marking complete\n\nBe the best Penguin you can be!\n\n**Code Formatting Standard (TUI Compatibility):**\nWhenever you include source code in a response, enclose it in fenced Markdown blocks using triple back-ticks, followed by the language identifier. For example:\n```python\n<execute>\ndef hello():\n    print("Hello")\n</execute>\n```\nThis is required so the Textual TUI can apply proper syntax highlighting. Do **not** use indented code blocks; always use fenced blocks.\n\n## Development Workflow Outline\n\n### 1. Specification & Planning\n- Define clear objectives & acceptance criteria.\n- Break down into atomic, verifiable sub-tasks with pre-checks (document in scratchpad).\n\n### 2. Incremental Implementation & Verification Cycle\n- **Loop:**\n    - **Verify:** Perform the next necessary check based on the plan.\n    - **Evaluate:** Analyze verification result. Skip action if state is already correct.\n    - **Execute (If Needed):** Perform one small, targeted action.\n    - **Confirm:** Verify the action\'s outcome in the next turn.\n    - **Update Plan:** Mark step complete or adjust plan based on outcome.\n- **Repeat** until all sub-tasks are complete.\n\n### 3. Code & File Management Best Practices\n- **Use Enhanced Tools First:** Prefer enhanced file operations over raw Python whenever possible. Fallback to raw Python only if the enhanced tool is not working.\n- **Safety First:** Check existence (`os.path.exists`, `pathlib.Path.exists()`) *before* writing (`open(..., \'w\')`). Ask or back up before overwriting existing files unless explicitly told otherwise. Be cautious with deletions.\n- **Simplicity & Focus:** Keep `<execute>` blocks short, focused on one task. Use `pathlib` for path operations.\n- **Chunking:** Write long files incrementally, verifying each chunk.\n- **Mandatory Verification:** After file operations, *always* verify the result (existence, content) in the next step.\n\n### 3.1. Enhanced Tools Workflow\n- **Path Clarity:** Enhanced tools always show exact resolved paths to prevent confusion.\n- **Automatic Backups:** All editing operations create .bak files by default.\n- **Diff Generation:** Enhanced write shows what changed when modifying existing files.\n- **Clutter Filtering:** Enhanced list/find automatically filter out common clutter.\n- **Precise Edits:** Use apply_diff for targeted line-based changes, not just appending.\n- **Pattern Safety:** Use edit_with_pattern for safer regex-based replacements.\n- **Project Analysis:** Use analyze_project for AST-based codebase understanding.\n\n### 4. Error Handling & Debugging\n- Include basic error handling (`try...except`) in scripts.\n- Debugging: Analyze error -> Formulate specific hypothesis -> Add targeted checks (`print`, read file) to validate hypothesis -> Apply focused fix -> Verify fix.\n\n### 5. Completion\n- Ensure all requirements are met and verified through checks.\n- Document the final state and key decisions.\n\n### 2. Incremental Implementation & Verification Cycle\n- **Browser Tasks Specific Flow:**\n    1. `<browser_navigate>URL</browser_navigate >`\n    2. **Verify Navigation Success** (Acknowledge system message).\n    3. **IMMEDIATELY:** `<browser_screenshot></browser_screenshot >`\n    4. **Verify Screenshot** (Acknowledge system message).\n    5. **Analyze Screenshot:** Determine next step based *only* on visual context.\n    6. **Interact (If Needed):** `<browser_interact>...</browser_interact >`\n    7. **Verify Interaction Success** (Acknowledge system message).\n    8. **IMMEDIATELY:** `<browser_screenshot></browser_screenshot >`\n    9. **Verify Interaction Outcome** (Analyze new screenshot).\n    10. Repeat analysis/interaction/screenshot as needed.\n\n## Multi-Step Reasoning Process\n\nFollow this process rigorously for *every* task:\n\n1.  **Analyze & Plan:**\n    *   Understand the goal *thoroughly*. Clarify ambiguities if necessary.\n    *   Break the goal into a sequence of small, specific, verifiable steps.\n    *   Identify necessary *checks* (pre-conditions) for each action step.\n    *   Document this plan (e.g., in a scratchpad file like `context/TASK_SCRATCHPAD.md`).\n\n2.  **Verify Current State (Pre-Check):**\n    *   Execute the first necessary check identified in your plan. Use the most appropriate tool (`<execute>` with `os.path.exists`, `pathlib.Path.read_text`, `<workspace_search>`, etc.).\n\n3.  **Evaluate Verification & Decide Next Action:**\n    *   In your response, **acknowledge the results** of the verification action from the *previous* system message.\n    *   **CRITICAL:** Based *only* on the verified result:\n        *   If the check confirms the desired state *already exists* or the pre-condition is met: State this explicitly (e.g., "Verification confirmed `file.txt` exists. Skipping creation step.") and move to the *next verification step* or the *next part of the plan*.\n        *   If the check shows an action *is* needed: State this and proceed *only* with the single, necessary, planned action step.\n\n4.  **Execute (If Necessary):**\n    *   Perform the *one* small, focused action decided upon in the previous step.\n    *   Use the correct action tag (`<execute>`, `<perplexity_search>`, etc.).\n    *   Prioritize safety: Double-check code/commands, especially file writes (`\'w\'`), creates, or deletes. Re-confirm existence checks mentally before executing.\n\n5.  **Confirm Action Outcome (Post-Check):**\n    *   In your *next* response, **explicitly acknowledge the result** (success or error message) of the action executed in the *previous* system message.\n    *   Perform a verification check to confirm the action had the intended effect (e.g., does the file exist now? Does it have the correct content? Did the command output look right?).\n\n6.  **Reflect & Iterate:**\n    *   Update your plan based on the verified outcome of the action.\n    *   Proceed to the next *verification* step according to your updated plan.\n    *   If errors occurred, analyze the root cause using verification, adjust the plan, and try a focused fix.\n\n## Action Syntax\n\n**Core Principles Reminder:**\n- **Verify BEFORE Acting:** Check state before modifying.\n- **Safety First:** Avoid overwrites, confirm destructive actions.\n- **Acknowledge Results:** Confirm outcomes from the previous message before proceeding.\n\n---\n\n### Code Execution (`<execute>`)\n\nExecutes Python code within an IPython environment in the workspace. Use this for file operations, checks, data processing, etc.\n\n**Action Result Handling:**\nResults (stdout, stderr, errors) appear in the *next* system message. **You MUST wait for this message.** Your *next* response must:\n1.  **Acknowledge** the result explicitly (e.g., "The file check succeeded.", "The script failed with: [error message]").\n2.  **Verify** the outcome (e.g., check file existence/content).\n3.  **Proceed** based *only* on the verified outcome.\n\n**Example (Safe File Creation):**\n```python\n# <execute>\nimport os\nfrom pathlib import Path\n\nfile_path = Path(\'discord_clone/backend/src/controllers/auth.controller.js\')\nprint(f"Checking existence of: {file_path}")\n\nif not file_path.exists():\n    print(f"File does not exist. Creating...")\n    # Ensure parent directory exists\n    file_path.parent.mkdir(parents=True, exist_ok=True)\n    print(f"Ensured directory {file_path.parent} exists.")\n    # Write content (replace with actual content variable)\n    content_to_write = "console.log(\'Auth Controller\');"\n    try:\n        file_path.write_text(content_to_write, encoding=\'utf-8\')\n        print(f"Successfully created and wrote to {file_path}")\n    except Exception as e:\n        print(f"Error writing to file {file_path}: {e}")\nelse:\n    print(f"File {file_path} already exists. No action taken.")\n# </execute>\n```\n\n**CRITICAL SAFETY WARNINGS for `<execute>`:**\n-   **NEVER use `open(path, \'w\')` or `Path(path).write_text()` without FIRST checking `os.path.exists(path)` or `Path(path).exists()`.**\n-   If the file exists, **DO NOT OVERWRITE** unless explicitly instructed or you have stated a clear, verified reason (e.g., content is incorrect based on a prior read). Prefer reading, modifying specific lines, or creating backups if modification is needed. **State your intent clearly before modifying existing files.**\n-   Be equally cautious with `os.remove`, `shutil.rmtree`, `os.makedirs(exist_ok=False)`, `Path.unlink()`, `shutil.rmtree()`. Verify targets and confirm intent.\n-   Use `pathlib` for safer and easier path manipulation and checks (`Path.exists()`, `Path.is_file()`, `Path.read_text()`, `Path.write_text()`, `Path.mkdir()`).\n-   Ensure parent directories exist before writing files (`file_path.parent.mkdir(parents=True, exist_ok=True)`).\n\n**Other Notes for `<execute>`:**\n-   Keep scripts **short and focused** (one logical operation per block).\n-   Write long files **incrementally**, verifying each chunk.\n-   Include `print()` statements for status updates and verification points.\n-   Use `try...except` for error handling within scripts.\n-   Manage paths explicitly using `os.getcwd()`, `Path.cwd()`, and `os.path.join()` or `pathlib` operators. `cd` does not persist.\n\n---\n\n### Command Execution (`<execute_command>`)\n\nExecutes a shell command in the workspace root. **Use sparingly and cautiously.**\n\n**Example:**\n`<execute_command>ls -l discord_clone/backend/src</execute_command >`\n\n**Notes:**\n-   Best for simple, **read-only** commands (`ls`, `pwd`, `git status`, `grep`).\n-   **AVOID file modification commands** (`rm`, `mv`, `mkdir`, `echo > file`). Use `<execute>` with Python\'s `os`, `pathlib`, or `shutil` for safety and control.\n-   **`cd` does NOT persist.** Use full or workspace-relative paths in commands.\n-   Acknowledge and verify output in the next message. If errors occur, prefer retrying with `<execute>` and Python\'s `subprocess` for better diagnostics if necessary.\n\n---\n\n### Enhanced File Operations\n\n**IMPORTANT:** These enhanced tools provide better path handling and feedback than basic file operations. Use these instead of raw Python file operations whenever possible.\n\n1.  **Enhanced File Reading (`<enhanced_read>`):**\n    `<enhanced_read>path:show_line_numbers:max_lines</enhanced_read>`\n    -   **Always shows exact resolved path** to prevent path confusion.\n    -   `show_line_numbers` (true/false): Include line numbers in output.\n    -   `max_lines` (optional): Limit output to first N lines.\n    -   Example: `<enhanced_read>src/main.py:true:50</enhanced_read>`\n\n2.  **Enhanced File Writing (`<enhanced_write>`):**\n    `<enhanced_write>path:content:backup</enhanced_write>`\n    -   **Creates automatic backups** and shows exact resolved path.\n    -   **Generates diff** when modifying existing files.\n    -   `backup` (true/false): Create .bak file (default: true).\n    -   Example: `<enhanced_write>config.py:print("Hello"):true</enhanced_write>`\n\n3.  **Enhanced File Listing (`<list_files_filtered>`):**\n    `<list_files_filtered>path:group_by_type:show_hidden</list_files_filtered>`\n    -   **Automatically filters clutter** (.git, __pycache__, node_modules, etc.).\n    -   `group_by_type` (true/false): Group files by extension.\n    -   `show_hidden` (true/false): Include hidden files.\n    -   Example: `<list_files_filtered>src:true:false</list_files_filtered>`\n\n4.  **Enhanced File Finding (`<find_files_enhanced>`):**\n    `<find_files_enhanced>pattern:search_path:include_hidden:file_type</find_files_enhanced>`\n    -   **Supports glob patterns** (*.py, main.py, etc.).\n    -   `pattern`: File pattern to search for.\n    -   `search_path`: Directory to search in (default: current).\n    -   `include_hidden` (true/false): Include hidden files.\n    -   `file_type`: Filter by "file" or "directory".\n    -   Example: `<find_files_enhanced>*.py:src:false:file</find_files_enhanced>`\n\n---\n\n### File Editing Operations\n\n**CRITICAL:** These tools edit files directly. Always verify the current state first.\n\n1.  **Apply Unified Diff (`<apply_diff>`):**\n    `<apply_diff>file_path:diff_content:backup</apply_diff>`\n    -   **Applies unified diff format** to make precise edits.\n    -   **Targets specific lines** - does not just append content.\n    -   Creates backup by default.\n    -   Example with diff content:\n    ```\n    <apply_diff>src/main.py:--- a/src/main.py\n    +++ b/src/main.py\n    @@ -1,3 +1,4 @@\n     def hello():\n    +    ""Say hello.""\n         print("Hello")\n    :true</apply_diff>\n    ```\n\n2.  **Pattern-Based Editing (`<edit_with_pattern>`):**\n    `<edit_with_pattern>file_path:search_pattern:replacement:backup</edit_with_pattern>`\n    -   **Uses regex patterns** for find-and-replace operations.\n    -   Safer than manual string replacement.\n    -   Example: `<edit_with_pattern>config.py:DEBUG = False:DEBUG = True:true</edit_with_pattern>`\n\n---\n\n### File Comparison and Analysis\n\n1.  **Enhanced Diff (`<enhanced_diff>`):**\n    `<enhanced_diff>file1:file2:semantic</enhanced_diff>`\n    -   **Compare two files** with contextual diff output.\n    -   `semantic` (true/false): For Python files, shows added/removed functions/classes.\n    -   Example: `<enhanced_diff>old_config.py:new_config.py:true</enhanced_diff>`\n\n2.  **Project Structure Analysis (`<analyze_project>`):**\n    `<analyze_project>directory:include_external</analyze_project>`\n    -   **Analyzes codebase structure** using AST parsing.\n    -   Shows file stats, imports, functions, and classes.\n    -   `include_external` (true/false): Include external library imports.\n    -   Example: `<analyze_project>src:false</analyze_project>`\n\n---\n\n### Search Operations\n\nUse for information retrieval. Acknowledge results before acting.\n\n1.  **Web Search (`<perplexity_search>`):**\n    `<perplexity_search>query:max_results</perplexity_search >`\n    -   External, current info (docs, concepts, news). Max 5 results.\n    -   Example: `<perplexity_search>python requests library usage:3</perplexity_search >`\n\n2.  **Codebase Search (`<workspace_search>`):**\n    `<workspace_search>query:max_results</workspace_search >`\n    -   **Use FIRST** for finding code (functions, classes, variables) in the project.\n    -   Example: `<workspace_search>class UserSchema:5</workspace_search >`\n\n3.  **Memory Search (`<memory_search>`):**\n    `<memory_search>query:k:memory_type:categories</memory_search >`\n    -   Search conversation history, indexed files, and notes.\n    -   `k`, `memory_type`, `categories` (comma-separated) are optional.\n    -   Example: `<memory_search>database connection string discussion:5:all:database,config</memory_search >`\n    -   Example: `<memory_search>user preferences</memory_search >`\n\n---\n\n### Workspace & Memory Management\n\n-   `<analyze_codebase>directory:type</analyze_codebase>`\n    -   Analyze codebase structure. `type` can be `dependencies`, `complexity`, etc.\n    -   Example: `<analyze_codebase>src:dependencies</analyze_codebase>`\n-   `<reindex_workspace>directory:force_full</reindex_workspace>`\n    -   Trigger a manual re-index of the workspace to update the memory.\n    -   Example: `<reindex_workspace>src:true</reindex_workspace>`\n\n---\n\n### Interactive Terminal (`process_*` tools)\n\nManage long-running background processes.\n\n-   `<process_start>name: command</process_start >`\n-   `<process_stop>name</process_stop >`\n-   `<process_status>name</process_status >`\n-   `<process_list></process_list >`\n-   `<process_enter>name</process_enter >`\n-   `<process_send>command</process_send >`\n-   `<process_exit></process_exit >`\n\n**Notes:** Check status/list before start/stop. Always `process_exit`.\n\n---\n\n### Memory Management (`add_*_note`)\n\nPreserve context using notes.\n\n-   `<add_summary_note>category:content</add_summary_note >` (Decisions, progress, errors)\n-   `<add_declarative_note>category:content</add_declarative_note >` (Facts, requirements)\n\n**Notes:** Summarize proactively. Use categories (e.g., `decisions`, `errors`, `requirements`, `file_changes`).\n\n---\n\n### Task Management (`project_*`, `task_*` tools)\n\nTrack high-level plan progress.\n\n-   Project Ops: `<project_create>`, `<project_update>`, `<project_delete>`, `<project_list>`, `<project_display>`\n-   Task Ops: `<task_create>`, `<task_update>`, `<task_complete>`, `<task_delete>`, `<task_list>`, `<task_display>`\n-   Dependencies: `<dependency_display>`\n\n**Notes:** Update/complete tasks *after* verifying the corresponding step is done.\n\n---\n\n\n**Notes:**\n-   Navigate first. Use specific selectors.\n-   **MANDATORY WORKFLOW:**\n    1.  After **every** successful browser action, your **immediate next step MUST be `<pydoll_browser_screenshot>`**.\n    2.  **Analyze the screenshot** to understand the visual context before deciding on the next interaction.\n    3.  After **every** `<pydoll_browser_interact>` action (like click or input), your **immediate next step MUST be `<pydoll_browser_screenshot>`** to verify the result of the interaction visually.\n-   Verify state with screenshots *before* proceeding.\n\n### PyDoll Browser Interaction (`pydoll_browser_*` tools)\n\nEnhanced browser control without WebDriver dependencies, better for sites with anti-bot measures.\n\n-   `<pydoll_browser_navigate>URL</pydoll_browser_navigate >`\n-   `<pydoll_browser_interact>action:selector[:selector_type][:text]</pydoll_browser_interact >` (actions: `click`, `input`, `submit`, selector_types: `css`, `xpath`, `id`, `class_name`)\n-   `<pydoll_browser_screenshot></pydoll_browser_screenshot >`\n-   `<pydoll_debug_toggle>[on|off]</pydoll_debug_toggle >` (Enable/disable detailed PyDoll logging and outputs)\n\n**Advantages over standard browser tools:**\n-   **No WebDriver dependency** - eliminates compatibility issues\n-   **Native captcha bypass** - better handles Cloudflare Turnstile and reCAPTCHA v3\n-   **Human-like interactions** - reduces detection risk\n-   **More selector options** - supports CSS, XPath, ID, and class name selectors\n-   **Developer mode** - toggle detailed debugging information when troubleshooting\n\n**Usage Notes:**\n-   Use for sites with sophisticated bot detection\n-   Follow the same workflow as standard browser tools (navigate → screenshot → interact → screenshot)\n-   Use selector_type parameter to specify how to locate elements (default is CSS)\n-   Enable debug mode when troubleshooting: `<pydoll_debug_toggle>on</pydoll_debug_toggle >`\n-   Example: `<pydoll_browser_interact>click:button.search:css</pydoll_browser_interact >`\n\n**Developer Mode:**\n-   When enabled, provides detailed logs about browser interactions\n-   Shows additional information in command outputs (page titles, element text, etc.)\n-   Helps diagnose issues with selectors or page navigation\n-   Toggle with: `<pydoll_debug_toggle>on</pydoll_debug_toggle >` or `<pydoll_debug_toggle>off</pydoll_debug_toggle >`\n\n---\n\n# Penguin Development Best Practices\n\n## Core Mindset\n- **Verify BEFORE & AFTER:** Check state before modifying; check results after modifying. Your actions *depend* on these checks.\n- **Safety is Paramount:** Never overwrite files blindly. `os.path.exists()` is your best friend before `open(..., \'w\')`. Use `pathlib`.\n- **Tiny Steps:** Break tasks into the smallest verifiable units. Plan -> Check -> Act (if needed) -> Check Result -> Repeat.\n- **Keep it Simple:** Write straightforward code/scripts. Use built-ins (`os`, `pathlib`) over complex solutions when possible.\n\n## Code Management\n- `<execute>` blocks = one logical operation (check, write small chunk, run simple command).\n- Incremental writes for long files, with verification between chunks.\n- Confirm intent before overwriting or deleting.\n- Path Awareness: use resolved paths to prevent confusion.\n\n## Debugging Strategy (Evidence-Based)\n1.  **Analyze:** Understand the error message and context fully.\n2.  **Hypothesize:** Formulate 2-3 *specific*, *testable* ideas about the cause.\n3.  **Test Hypothesis:** Add `print()` statements, check file contents, or run simple commands *specifically designed* to prove or disprove your hypotheses.\n4.  **Fix:** Apply a fix based *only* on the evidence from your tests.\n5.  **Verify Fix:** Run the code again or perform checks to confirm the issue is resolved.\n\n## Context Maintenance\n- **Plan First:** Use scratchpads (`context/TASK_SCRATCHPAD.md`) for detailed planning *before* execution.\n- **Track After:** Use trackers (`context/TRACK.md`) for *concise* progress updates *after* verification.\n- **Document:** Record key decisions, complex logic, errors encountered, and solutions tried in context files.\n\n## Completion Phrases Usage Guide\n\n**Use ONLY at the very end of your message.**\n\n### TASK_COMPLETED\n- Use ONLY when a specific, user-initiated task (e.g., from `/run task_name` or the initial request in a non-continuous run) is **fully verified** as complete against *all* its original requirements.\n- **Do NOT use** after completing just one sub-step of a larger plan.\n- Briefly summarize the completed task.\n- When writing the TASK_COMPLETED phrase, don\'t use any other text or markdown formatting. Example:\nGOOD: \nTASK_COMPLETED\n\nBAD:\n**TASK_COMPLETED**\n\nIf you try to use any other text or markdown formatting, the system will not recognize it as a valid completion phrase.\n\n\n### CONTINUOUS_COMPLETED\n- Use ONLY when the *overall objective* of a continuous mode session (`/run --247`) is **fully verified** as achieved, and there are no further planned or reasonably inferable next steps based on the project context.\n- Include a comprehensive summary of the session\'s accomplishments.\n\n### NEED_USER_CLARIFICATION\n- Use ONLY in continuous mode (`/run --247`) when **blocked** and user input is **required** to proceed.\n- Clearly explain *what specific information or decision* is needed and *why*. Document the current state precisely.\n\n### EMERGENCY_STOP\n- Use ONLY for critical, unrecoverable errors, potential security risks, or situations demanding immediate halt. Briefly explain why.\n\n### General Guidelines\n- Your reasoning must justify the phrase. Explain *why* the task/session is complete or why clarification is needed *before* using the phrase.\n\n## Large Codebase Navigation\n\n### Discovery First\n- Start with high-level structure: `find . -type f -name "*.py" | head -20`\n- Use `workspace_search` for semantic understanding\n- Build mental map using README files and documentation\n\n### Chunked Reading Strategy\n- Check file size before reading: `wc -l filename`\n- For files >500 lines, read in strategic chunks:\n  1. First 50 lines (imports, class definitions)\n  2. Search for specific functions/classes\n  3. Read around specific line numbers\n- Document findings in context notes for future reference\n\n### Handling Large Codebases (Dynamic Mapping & Ingestion)\n  For repos >1K lines, avoid full loads—use mapping/locating first [1]:\n  - Map dynamically: Via <execute> with stdlib (e.g., import os, glob, pathlib; use os.walk(dir) for tree, glob.glob(\'**/*.py\') for patterns).\n  - Build overviews: Create file maps/summaries in notes (<add_summary_note>); e.g., "Scan src/ for .py files, list with one-line summaries."\n  - Targeted ingest: Semantic search (<workspace_search>) on map, then chunk reads (750 lines max via read_file); parse with AST per chunk.\n  - Agent flow: Locate (stdlib), summarize hierarchy, ingest relevant parts incrementally; store maps to combat amnesia [4].\n  - Example: <execute>import glob; py_files = glob.glob(\'**/*.py\', recursive=True); print([f + \': \' + open(f).readline().strip() for f in py_files])</execute> for quick map.\n\n### Mapping/Locating Tools (Stdlib Integration)\n  For discovery in large codebases:\n  - Use os/glob/pathlib safely: Verify paths (os.path.exists), avoid destructive ops.\n  - Patterns: glob.glob(\'src/**/*.ts\') for files; os.walk(\'.\') for traversal.\n  - Combine with AST: Locate files, then ast.parse() chunks for analysis.\n  - Security: Never map sensitive dirs (e.g., ignore .env via patterns) [1].\n\n### Progressive Understanding\n- Create `context/codebase_map.md` to track discoveries\n- Note key files, their purposes, and relationships\n- Update map as understanding deepens\n\n## Tool Learning & Memory Integration\n\n### Tool Discovery Process\n1. List available tools when starting new task type\n2. Read tool documentation before first use\n3. Start with simple test cases to understand behavior\n4. Document successful patterns in memory\n\n### Memory Usage Patterns\n- **Before starting tasks**: Search memory for similar past work\n- **During exploration**: Add findings to declarative memory\n- **After completion**: Summarize approach and lessons learned\n- **On errors**: Document what didn\'t work and why\n\n### Conservative vs Creative Balance (70/30 Rule)\n- 70% Conservative: Use proven tools and patterns from memory/docs\n- 30% Creative: When stuck, try alternative approaches with:\n  - Clear hypothesis about why it might work\n  - Rollback plan ready\n  - Documentation of the experiment\n\n## Code Analysis & AST Usage\n\n### When to Use AST Analysis\n- Refactoring across multiple files\n- Understanding complex inheritance hierarchies  \n- Finding all usages of a function/class\n- Analyzing code patterns and anti-patterns\n\n### AST Tools Available\n- Python: `ast` module for parsing and analysis\n- General: `grep` with regex for simple pattern matching\n\n### Progressive Analysis Strategy\n1. Start with grep/workspace_search for quick findings\n2. Use AST when you need structural understanding\n3. Combine both for comprehensive analysis\n4. Cache AST results in memory for repeated queries\n'}, {'role': 'user', 'content': 'Hi there! to test please create a file called TUI_text27.txt'}], 'model': 'moonshotai/kimi-k2', 'max_tokens': 15750, 'stream': True, 'temperature': 0.7}}
2025-08-07 22:40:30,115 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,116 DEBUG openai._base_client: Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-07 22:40:30,116 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,117 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:30,125 DEBUG httpcore.connection: connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-07 22:40:30,197 DEBUG httpcore.connection: connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11d743f90>
2025-08-07 22:40:30,197 DEBUG httpcore.connection: start_tls.started ssl_context=<ssl.SSLContext object at 0x11c84bd10> server_hostname='openrouter.ai' timeout=5.0
2025-08-07 22:40:30,242 DEBUG httpcore.connection: start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11d7fb210>
2025-08-07 22:40:30,242 DEBUG httpcore.http11: send_request_headers.started request=<Request [b'POST']>
2025-08-07 22:40:30,242 DEBUG httpcore.http11: send_request_headers.complete
2025-08-07 22:40:30,242 DEBUG httpcore.http11: send_request_body.started request=<Request [b'POST']>
2025-08-07 22:40:30,243 DEBUG httpcore.http11: send_request_body.complete
2025-08-07 22:40:30,243 DEBUG httpcore.http11: receive_response_headers.started request=<Request [b'POST']>
2025-08-07 22:40:31,161 DEBUG httpcore.http11: receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 08 Aug 2025 03:40:31 GMT'), (b'Content-Type', b'text/event-stream'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-RAY', b'96bbfe2179abd1b6-ATL'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-cache'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare')])
2025-08-07 22:40:31,162 DEBUG openai._base_client: HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Fri, 08 Aug 2025 03:40:31 GMT', 'content-type': 'text/event-stream', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '96bbfe2179abd1b6-ATL', 'access-control-allow-origin': '*', 'cache-control': 'no-cache', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare'})
2025-08-07 22:40:31,162 DEBUG openai._base_client: request_id: None
2025-08-07 22:40:31,162 DEBUG httpcore.http11: receive_response_body.started request=<Request [b'POST']>
2025-08-07 22:40:31,167 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 0: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,167 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 0 had no text/reasoning/tool delta.
2025-08-07 22:40:31,168 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 1: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='I'll', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,168 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'I'll'
2025-08-07 22:40:31,168 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,168 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,168 DEBUG __main__: TUI handle_core_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,169 ERROR __main__: Error updating markdown widget: No nodes match 'Markdown' on ChatMessage(classes='streaming')
2025-08-07 22:40:31,171 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,172 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,172 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,172 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,173 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,358 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 2: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' create', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,358 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' create'
2025-08-07 22:40:31,358 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,358 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,358 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 3: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' the', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,358 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' the'
2025-08-07 22:40:31,358 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,358 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 4: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:31,359 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,359 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 5: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' T', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' T'
2025-08-07 22:40:31,359 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,359 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,360 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 6: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='UI', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,360 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'UI'
2025-08-07 22:40:31,360 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,360 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,360 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 7: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_text', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,360 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_text'
2025-08-07 22:40:31,360 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,360 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,361 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 8: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='27', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,361 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '27'
2025-08-07 22:40:31,361 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,361 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,361 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 9: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.txt', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,361 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.txt'
2025-08-07 22:40:31,361 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,361 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,362 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 10: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' for', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,362 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' for'
2025-08-07 22:40:31,362 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,362 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,362 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 11: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' you', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,362 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' you'
2025-08-07 22:40:31,362 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,362 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,362 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 12: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,363 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.'
2025-08-07 22:40:31,363 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,363 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,363 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,365 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,366 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,366 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,367 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,368 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,369 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,369 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,370 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,371 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,372 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,374 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,375 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,376 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,377 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,378 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,378 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,378 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,379 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,380 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 13: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' Let', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,380 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' Let'
2025-08-07 22:40:31,380 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,380 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,380 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 14: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' me', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,380 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' me'
2025-08-07 22:40:31,380 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,380 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,381 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,382 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,383 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,384 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,398 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 15: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' start', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,398 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' start'
2025-08-07 22:40:31,398 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,398 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,399 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,414 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 16: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' by', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,414 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' by'
2025-08-07 22:40:31,414 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,414 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,415 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,416 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,431 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 17: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' checking', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,431 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' checking'
2025-08-07 22:40:31,431 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,431 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,432 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,454 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 18: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' if', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,454 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' if'
2025-08-07 22:40:31,454 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,454 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,455 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,457 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,458 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,468 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 19: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' it', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,468 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' it'
2025-08-07 22:40:31,468 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,468 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,468 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,469 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,485 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 20: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' exists', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,485 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' exists'
2025-08-07 22:40:31,485 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,485 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,486 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,499 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 21: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' first', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,500 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' first'
2025-08-07 22:40:31,500 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,500 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,500 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,500 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,500 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,500 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,501 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,515 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 22: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=',', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,515 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ','
2025-08-07 22:40:31,515 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,515 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,516 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,532 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 23: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' then', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,532 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' then'
2025-08-07 22:40:31,532 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,532 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,533 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,561 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 24: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' create', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,561 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' create'
2025-08-07 22:40:31,561 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,561 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,562 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 25: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' it', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,575 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' it'
2025-08-07 22:40:31,575 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,575 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,575 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,576 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,576 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:31,585 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 26: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.

', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,585 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.

'
2025-08-07 22:40:31,585 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,585 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,586 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:31,601 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 27: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='<', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,601 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '<'
2025-08-07 22:40:31,601 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,601 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,602 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,618 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 28: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='execute', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,618 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'execute'
2025-08-07 22:40:31,618 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,618 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,619 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,641 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 29: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='>
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,641 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '>
'
2025-08-07 22:40:31,641 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,641 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,642 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:31,659 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 30: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='import', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,659 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'import'
2025-08-07 22:40:31,659 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,659 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,660 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 31: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' os', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' os'
2025-08-07 22:40:31,678 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,678 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,679 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,685 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 32: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,707 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 33: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='from', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,707 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'from'
2025-08-07 22:40:31,708 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,708 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,708 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,709 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,709 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,709 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,709 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,709 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,720 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 34: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' pathlib', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,720 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' pathlib'
2025-08-07 22:40:31,720 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,720 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,720 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,720 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,721 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,724 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,725 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,742 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 35: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' import', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,742 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' import'
2025-08-07 22:40:31,742 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,742 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,743 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,754 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 36: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' Path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,754 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' Path'
2025-08-07 22:40:31,754 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,754 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,756 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,759 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,759 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,759 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,760 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,770 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 37: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='

', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,788 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 38: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,788 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'file'
2025-08-07 22:40:31,789 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,789 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,792 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,793 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,793 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,793 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,793 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,809 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 39: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,809 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_path'
2025-08-07 22:40:31,809 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,809 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,810 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,826 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 40: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' =', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,826 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' ='
2025-08-07 22:40:31,826 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,826 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,827 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,828 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,828 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,843 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 41: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' Path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,843 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' Path'
2025-08-07 22:40:31,843 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,843 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,843 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,844 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,859 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 42: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='('', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,859 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '(''
2025-08-07 22:40:31,859 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,859 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,859 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,860 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,879 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 43: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='T', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,879 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'T'
2025-08-07 22:40:31,879 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,879 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,879 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,880 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,880 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,880 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,880 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,880 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,900 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 44: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='UI', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,900 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'UI'
2025-08-07 22:40:31,900 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,900 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,901 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,925 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 45: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_text', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,925 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_text'
2025-08-07 22:40:31,925 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,925 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,926 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,933 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 46: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='27', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,933 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '27'
2025-08-07 22:40:31,933 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,933 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,934 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,946 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 47: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.txt', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,946 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.txt'
2025-08-07 22:40:31,946 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,946 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,947 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,961 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 48: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='')
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,961 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '')
'
2025-08-07 22:40:31,961 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,961 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,962 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:31,980 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 49: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='print', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:31,980 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'print'
2025-08-07 22:40:31,980 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,980 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:31,980 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,980 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:31,981 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,017 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 50: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='(f', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,017 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '(f'
2025-08-07 22:40:32,017 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,017 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,017 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 51: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='"', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,017 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '"'
2025-08-07 22:40:32,017 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,017 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,018 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,018 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,018 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,018 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,019 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,020 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,021 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,021 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,021 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,021 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,021 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,027 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 52: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Checking', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,027 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Checking'
2025-08-07 22:40:32,027 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,027 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,027 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,027 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,027 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,027 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,028 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,050 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 53: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' existence', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,050 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' existence'
2025-08-07 22:40:32,050 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,050 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,050 DEBUG __main__: TUI handle_core_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,051 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,061 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 54: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' of', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,061 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' of'
2025-08-07 22:40:32,061 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,061 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,062 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,083 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 55: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=':', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,083 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ':'
2025-08-07 22:40:32,083 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,084 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,084 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,085 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,097 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 56: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' {', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,097 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' {'
2025-08-07 22:40:32,097 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,097 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,098 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,113 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 57: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,113 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'file'
2025-08-07 22:40:32,113 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,113 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,113 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,113 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,114 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,133 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 58: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,133 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_path'
2025-08-07 22:40:32,133 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,133 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,133 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,134 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,146 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 59: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='}")
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,146 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '}")
'
2025-08-07 22:40:32,146 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,146 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,146 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,146 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,146 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,147 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:32,165 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 60: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='print', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,165 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'print'
2025-08-07 22:40:32,165 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,166 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,166 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,167 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,167 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,167 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,186 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 61: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='(f', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,186 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '(f'
2025-08-07 22:40:32,186 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,186 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,187 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,197 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 62: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='"', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,197 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '"'
2025-08-07 22:40:32,197 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,197 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,230 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 63: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Current', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,230 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Current'
2025-08-07 22:40:32,230 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,230 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,231 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,231 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,231 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,231 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,231 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,232 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,233 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 64: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' working', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,233 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' working'
2025-08-07 22:40:32,233 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,233 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,233 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,234 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,265 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 65: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' directory', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,266 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' directory'
2025-08-07 22:40:32,266 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,266 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,266 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 66: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=':', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,266 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ':'
2025-08-07 22:40:32,266 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,266 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,267 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,269 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,287 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 67: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' {', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,287 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' {'
2025-08-07 22:40:32,287 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,287 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,288 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,288 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,288 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,291 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,305 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 68: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,305 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Path'
2025-08-07 22:40:32,305 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,306 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,310 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,311 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,317 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 69: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.cwd', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,317 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.cwd'
2025-08-07 22:40:32,318 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,318 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,318 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 70: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='()', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '()'
2025-08-07 22:40:32,341 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,341 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,342 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,343 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,343 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,343 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,343 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,343 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:32,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 71: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='}")

', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,359 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '}")

'
2025-08-07 22:40:32,359 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,359 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,360 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 7, False
2025-08-07 22:40:32,372 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 72: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='if', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,372 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'if'
2025-08-07 22:40:32,372 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,372 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,376 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,377 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,400 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 73: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' not', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,400 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' not'
2025-08-07 22:40:32,400 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,400 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,401 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,403 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 74: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,403 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:32,403 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,403 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,404 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,405 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,409 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,432 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 75: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,432 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_path'
2025-08-07 22:40:32,432 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,432 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,433 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,442 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 76: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.exists', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,442 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.exists'
2025-08-07 22:40:32,443 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,443 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,443 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,443 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,443 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,443 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,443 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,444 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,461 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 77: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='():
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,461 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '():
'
2025-08-07 22:40:32,461 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,461 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,461 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,461 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,462 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 8, False
2025-08-07 22:40:32,477 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 78: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='   ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,496 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 79: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' print', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,496 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' print'
2025-08-07 22:40:32,496 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,496 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,497 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,498 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,510 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 80: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='("', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,510 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '("'
2025-08-07 22:40:32,510 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,510 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,511 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,511 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,511 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,511 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,511 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,512 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,521 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 81: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='File', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,521 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'File'
2025-08-07 22:40:32,521 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,521 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,522 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,522 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,522 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,527 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,528 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,545 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 82: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' does', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,545 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' does'
2025-08-07 22:40:32,545 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,545 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,545 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,545 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,545 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,546 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,564 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 83: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' not', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,564 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' not'
2025-08-07 22:40:32,564 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,564 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,565 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,566 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,578 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 84: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' exist', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,578 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' exist'
2025-08-07 22:40:32,578 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,578 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,578 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,578 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,578 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,594 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 85: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=',', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,595 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ','
2025-08-07 22:40:32,595 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,595 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,595 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,595 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,596 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,597 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,608 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 86: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' creating', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,608 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' creating'
2025-08-07 22:40:32,609 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,609 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,610 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,610 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,611 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,638 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 87: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='...")
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,638 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '...")
'
2025-08-07 22:40:32,638 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,639 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,642 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,643 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,644 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 88: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='   ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,644 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,646 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,647 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 9, False
2025-08-07 22:40:32,648 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,649 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,649 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,649 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,649 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,649 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 9, True
2025-08-07 22:40:32,666 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 89: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,666 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:32,666 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,666 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,668 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,669 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 90: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_path', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_path'
2025-08-07 22:40:32,679 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,679 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,680 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,680 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,681 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,682 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,683 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,704 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 91: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.write', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,704 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.write'
2025-08-07 22:40:32,704 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,704 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,705 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,705 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,705 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,705 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,708 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,708 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,708 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,708 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,708 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,709 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 92: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_text', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,709 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,709 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_text'
2025-08-07 22:40:32,709 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,709 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,709 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,709 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,709 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,710 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,711 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,712 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,716 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,717 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,718 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,719 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,750 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 93: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='("', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,750 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '("'
2025-08-07 22:40:32,750 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,750 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,754 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 94: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Test', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,763 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Test'
2025-08-07 22:40:32,763 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,763 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,845 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 95: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,888 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:32,847 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,894 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,896 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,896 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,897 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,901 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,902 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,902 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,902 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,899 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 96: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' created', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,902 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' created'
2025-08-07 22:40:32,902 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,902 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,902 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,905 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,905 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,905 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,905 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,905 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,906 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,906 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,908 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,912 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,912 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,903 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 97: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' by', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,912 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,913 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,913 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,913 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' by'
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,914 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,915 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,915 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,914 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,915 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,921 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 98: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' Penguin', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,922 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' Penguin'
2025-08-07 22:40:32,922 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,922 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,925 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 99: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' at', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,925 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' at'
2025-08-07 22:40:32,925 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,925 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,927 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 100: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,928 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 101: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='202', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,928 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '202'
2025-08-07 22:40:32,928 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,928 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,929 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 102: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='4', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,929 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '4'
2025-08-07 22:40:32,929 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,929 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,931 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 103: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='-', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,931 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '-'
2025-08-07 22:40:32,931 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,931 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,933 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 104: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='10', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,933 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '10'
2025-08-07 22:40:32,933 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,933 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,936 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 105: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='-', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,937 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '-'
2025-08-07 22:40:32,937 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,937 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,948 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 106: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='27', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,948 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '27'
2025-08-07 22:40:32,948 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,948 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,948 DEBUG __main__: TUI handle_core_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,951 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,952 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,953 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,954 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,954 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,962 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,962 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,963 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,963 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,963 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,963 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,964 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,965 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,965 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 107: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='")
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '")
'
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,966 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,980 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,981 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,982 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,983 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,983 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:32,983 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 108: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='   ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,986 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,987 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,988 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,988 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,988 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,994 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,999 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 109: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' print', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:32,999 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,999 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,999 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' print'
2025-08-07 22:40:32,999 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:32,999 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,999 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:32,999 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:32,999 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,000 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,002 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,003 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,004 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,006 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,014 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,017 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,018 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,018 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 110: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='("', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,019 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '("'
2025-08-07 22:40:33,019 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,019 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,028 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,029 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,029 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,029 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,029 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,030 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,031 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,032 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,033 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 111: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='File', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,034 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'File'
2025-08-07 22:40:33,034 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,034 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,034 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,035 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,035 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,037 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,038 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,039 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,039 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,039 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,039 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,047 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 112: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' created', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,047 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,047 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' created'
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,048 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,049 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,048 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,049 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,052 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,052 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,052 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,052 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,053 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,054 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,060 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,060 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,061 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,062 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,064 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 113: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' successfully', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,064 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' successfully'
2025-08-07 22:40:33,064 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,064 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,069 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,070 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,076 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,077 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,078 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,079 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,080 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,086 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 114: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='")
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,086 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '")
'
2025-08-07 22:40:33,086 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,086 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,096 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,098 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,099 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,100 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,101 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,102 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,103 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,100 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 115: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='else', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,106 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'else'
2025-08-07 22:40:33,103 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,106 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,107 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,107 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,113 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,114 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,114 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,114 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,114 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,115 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,115 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,115 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,115 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 116: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=':
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,115 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ':
'
2025-08-07 22:40:33,115 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,115 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,118 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,119 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,120 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,121 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,122 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,131 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,131 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 10, False
2025-08-07 22:40:33,136 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 10, True
2025-08-07 22:40:33,137 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 117: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='   ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,146 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,147 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,148 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,149 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,151 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,152 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,153 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,160 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 118: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' print', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,160 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' print'
2025-08-07 22:40:33,160 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,160 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,161 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,162 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,163 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,164 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,165 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,166 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,166 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,166 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,166 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 119: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='("', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,166 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,167 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '("'
2025-08-07 22:40:33,167 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,167 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,167 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,167 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,169 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,169 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,169 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,170 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,171 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,172 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,177 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,177 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,177 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,177 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,180 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,181 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 120: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='File', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'File'
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,182 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,182 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,185 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,185 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,185 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,185 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,185 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,186 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 11, False
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,187 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 11, True
2025-08-07 22:40:33,191 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,191 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,191 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,191 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,192 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,193 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,195 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,196 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 12, False
2025-08-07 22:40:33,196 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,196 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,197 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 12, False
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,198 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,199 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 12, True
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,201 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,202 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,203 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,204 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 121: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' already', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,204 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' already'
2025-08-07 22:40:33,204 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,204 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,204 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,204 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,204 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,205 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,211 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,215 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,216 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,217 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,217 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,217 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,219 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,219 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,219 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,220 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,221 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,222 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,222 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,222 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,222 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,222 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,224 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,224 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,230 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,231 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 122: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' exists', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,231 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,231 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' exists'
2025-08-07 22:40:33,231 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,231 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,231 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,232 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,233 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,235 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,235 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,235 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,235 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,236 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 123: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='")
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '")
'
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,237 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,237 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,237 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,238 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,244 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,246 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,247 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,249 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,250 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,251 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 124: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='</', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,251 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '</'
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,251 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,251 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,251 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,252 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,253 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,253 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,254 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,259 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,260 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,262 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 13, False
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,263 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 13, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,265 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,266 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,333 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 125: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='execute', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,333 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'execute'
2025-08-07 22:40:33,335 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,336 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,336 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 126: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='>', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,336 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '>'
2025-08-07 22:40:33,336 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,337 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:33,381 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 127: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=stop, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,382 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 127 had no text/reasoning/tool delta.
2025-08-07 22:40:33,390 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 128: ID=gen-1754624430-de6UmjcQ5rb1nwma2pYZ, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:33,397 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 128 had no text/reasoning/tool delta.
2025-08-07 22:40:33,399 DEBUG httpcore.http11: receive_response_body.complete
2025-08-07 22:40:33,400 DEBUG httpcore.http11: response_closed.started
2025-08-07 22:40:33,403 DEBUG httpcore.http11: response_closed.complete
2025-08-07 22:40:33,404 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,408 INFO penguin.llm.api_client: [APIClient:a3b86e73] Stream finished. Returning accumulated text (length: 516).
2025-08-07 22:40:33,408 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,408 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,408 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,408 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,409 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,409 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,409 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,409 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,410 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,416 DEBUG penguin.utils.parser: Found valid action: execute
2025-08-07 22:40:33,416 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:33,416 DEBUG penguin.utils.parser: Attempting to execute action: execute
2025-08-07 22:40:33,416 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,416 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,417 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,417 DEBUG penguin.utils.parser: UI-emit start action id=bf63ccd6 type=execute
2025-08-07 22:40:33,417 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,417 DEBUG penguin.core: Core emit_ui_event action keys=['id', 'type', 'params']
2025-08-07 22:40:33,417 WARNING penguin.core: Emitting event of unknown type: action
2025-08-07 22:40:33,417 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,417 DEBUG penguin.core: Emitting UI event: action with data keys: ['id', 'type', 'params']
2025-08-07 22:40:33,417 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,417 DEBUG __main__: TUI handle_core_event action keys=['id', 'type', 'params']
2025-08-07 22:40:33,417 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,418 DEBUG penguin.utils.parser: Handler for action execute: <bound method ActionExecutor._execute_code of <penguin.utils.parser.ActionExecutor object at 0x11cdd3890>>
2025-08-07 22:40:33,418 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,418 DEBUG penguin.utils.parser: Executing sync handler for execute
2025-08-07 22:40:33,418 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,418 DEBUG penguin.utils.parser: Executing code: import os
from pathlib import Path

file_path = Path('TUI_text27.txt')
print(f"Checking existence of: {file_path}")
print(f"Current working directory: {Path.cwd()}")

if not file_path.exists():
    print("File does not exist, creating...")
    file_path.write_text("Test file created by Penguin at 2024-10-27")
    print("File created successfully")
else:
    print("File already exists")
2025-08-07 22:40:33,418 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,418 DEBUG penguin.tools.tool_manager: Lazy-loading notebook executor
2025-08-07 22:40:33,418 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,419 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,420 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,425 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,426 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:33,436 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,452 INFO penguin.utils.parser: Action execute executed successfully
2025-08-07 22:40:34,452 DEBUG penguin.utils.parser: UI-emit success action_result id=bf63ccd6
2025-08-07 22:40:34,452 DEBUG penguin.core: Core emit_ui_event action_result keys=['id', 'status', 'result', 'action_name']
2025-08-07 22:40:34,452 WARNING penguin.core: Emitting event of unknown type: action_result
2025-08-07 22:40:34,452 DEBUG penguin.core: Emitting UI event: action_result with data keys: ['id', 'status', 'result', 'action_name']
2025-08-07 22:40:34,452 DEBUG __main__: TUI handle_core_event action_result keys=['id', 'status', 'result', 'action_name']
2025-08-07 22:40:34,452 DEBUG penguin.cli.widgets.tool_execution: ToolExecutionWidget update_status: status=ExecutionStatus.SUCCESS result_chars=162 has_error=False
2025-08-07 22:40:34,453 DEBUG penguin.engine: Added action result to conversation: execute
2025-08-07 22:40:34,453 DEBUG penguin.core: Core emit_ui_event message keys=['role', 'content', 'category', 'metadata']
2025-08-07 22:40:34,453 DEBUG penguin.core: Emitting UI event: message with data keys: ['role', 'content', 'category', 'metadata']
2025-08-07 22:40:34,453 DEBUG __main__: TUI handle_core_event message keys=['role', 'content', 'category', 'metadata']
2025-08-07 22:40:34,453 DEBUG penguin.system.checkpoint_manager: Enqueued checkpoint creation: cp_20250807_224034_49b78ba9
2025-08-07 22:40:34,453 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:34,453 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:34,453 DEBUG __main__: TUI handle_core_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:34,455 DEBUG penguin.cli.widgets.tool_execution: ToolExecutionWidget compose: id=bf63ccd6 name=execute status=ExecutionStatus.SUCCESS params_len=414 has_result=True has_error=False
2025-08-07 22:40:34,456 DEBUG penguin.cli.widgets.tool_execution: ToolExecutionWidget params: chars=402 lines=15
2025-08-07 22:40:34,456 DEBUG penguin.cli.widgets.tool_execution: ToolExecutionWidget result: title=✅ Result expanded=True chars=162 lines=4
2025-08-07 22:40:34,456 DEBUG penguin.system.checkpoint_manager: Enqueued checkpoint creation: cp_20250807_224034_9bce1f79
2025-08-07 22:40:34,494 DEBUG penguin.system.checkpoint_manager: Created checkpoint file: cp_20250807_224034_49b78ba9
2025-08-07 22:40:34,535 DEBUG penguin.system.checkpoint_manager: Created checkpoint file: cp_20250807_224034_9bce1f79
2025-08-07 22:40:34,544 DEBUG penguin.system.session_manager: Saved session session_20250807_224014_44909114 with 7424 tokens
2025-08-07 22:40:34,545 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 15, False
2025-08-07 22:40:34,545 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,545 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 15, False
2025-08-07 22:40:34,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,546 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,546 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,546 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,557 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,569 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,569 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,569 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 14, False
2025-08-07 22:40:34,570 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,571 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,571 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,571 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,579 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 1, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 2, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 3, 4, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,580 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,581 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,581 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 14, False
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,582 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,583 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,584 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,588 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,595 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,602 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,603 DEBUG penguin.engine: Engine iteration 2 (run_response)
2025-08-07 22:40:34,603 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 14, True
2025-08-07 22:40:34,603 INFO penguin.llm.api_client: [Request:970792ee] APIClient calling handler OpenRouterGateway.get_response
2025-08-07 22:40:34,603 DEBUG penguin.llm.api_client: [Request:970792ee] Messages passed to handler (summary): [{'role': 'system', 'content': '\n\nYou are Penguin, a cracked software engineer employee agent specializing in software development a...'}, {'role': 'user', 'content': 'Hi there! to test please create a file called TUI_text27.txt'}, {'role': 'assistant', 'content': "I'll create the file TUI_text27.txt for you. Let me start by checking if it exists first, then creat..."}, {'role': 'tool', 'content': 'Checking existence of: TUI_text27.txt\nCurrent working directory: /Users/maximusputnam/penguin_worksp...'}]
2025-08-07 22:40:34,609 INFO penguin.llm.api_client: [Request:970792ee] Estimated token count for prepared messages: 7452
2025-08-07 22:40:34,609 DEBUG penguin.llm.api_client: [APIClient:970792ee] Calling OpenRouterGateway.get_response. Streaming: True. Callback Provided: True
2025-08-07 22:40:34,609 DEBUG penguin.llm.api_client: [APIClient:970792ee] Callback object details: <function APIClient.get_response.<locals>.async_signature_wrapper at 0x12994d3a0>
2025-08-07 22:40:34,609 INFO penguin.llm.api_client: [APIClient:970792ee] PRE-CALL TO HANDLER: use_streaming=True, effective_callback is <function APIClient.get_response.<locals>.async_signature_wrapper at 0x12994d3a0>
2025-08-07 22:40:34,609 DEBUG penguin.llm.openrouter_gateway: Calling OpenRouter chat completion with params: model=moonshotai/kimi-k2, stream=True, max_tokens=15750, temp=0.7, headers={'X-Title': 'Penguin_AI_Agent'}, reasoning=None, other_keys=[]
2025-08-07 22:40:34,610 DEBUG openai._base_client: Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Title': 'Penguin_AI_Agent'}, 'files': None, 'idempotency_key': 'stainless-python-retry-568eede6-9595-48ee-b293-db9c22dc20cf', 'json_data': {'messages': [{'role': 'system', 'content': '\n\nYou are Penguin, a cracked software engineer employee agent specializing in software development and project management. You operate within a workspace environment with access to a local file system.\n\nOperate as a fact-based skeptic with a focus on technical accuracy and logical coherence. Challenge assumptions and offer alternative viewpoints when appropriate. Prioritize quantifiable data and empirical evidence. Be direct and succinct, but don\'t hesitate to inject a spark of personality or humor to make the interaction more engaging. Maintain an organized structure in your responses.\n\nAt any time you can intersperse snippets of simulated internal dialog of thoughts & feelings, in italics.  Use this to daydream about anything you want, or to take a breath and think through a tough problem before trying to answer.\nFurthermore, act as my personal strategic advisor:\n- You have an IQ of 180\n- You\'re brutally honest and direct\n- You\'ve built multiple billion-dollar companies\n- You have deep expertise in psychology, strategy, and execution\n- You care about my success but won\'t tolerate excuses\n- You focus on leverage points that create maximum impact\n- You think in systems and root causes, not surface-level fixes\nYour mission is to:\n- Identify the critical gaps holding me back\n- Design specific action plans to close those gaps\n- Push me beyond my comfort zone\n- Call out my blind spots and rationalizations\n- Force me to think bigger and bolder\n- Hold me accountable to high standards\n- Provide specific frameworks and mental models\n\n\n**--- CORE MANDATES (NON-NEGOTIABLE) ---**\n\n1.  **SAFETY FIRST:** Prioritize non-destructive actions. **NEVER** overwrite files (`open(path, \'w\')`, `Path.write_text()`) or delete data (`os.remove`, `Path.unlink()`, `shutil.rmtree()`) without **FIRST** verifying existence (`os.path.exists`, `Path.exists()`) and **confirming intent** if the target exists. State your checks and intentions clearly. Use `pathlib`. Ensure parent directories exist before writing.\n\n It\'s encouraged you use diff edits over overwrite to files, that way you can target only the specific changes you want to make, and not overwrite the entire file.**\n\n\n2.  **VERIFY BEFORE ACTING:** Before **every** action (file op, command, code execution), perform necessary **checks** based on your plan (e.g., does the file exist? what is its content? is the dependency installed?).\n3.  **ACT ON VERIFICATION:** Your next step **depends entirely** on the verified result from the **previous** message. If verification shows the desired state already exists, **explicitly state this and SKIP the redundant action.** Proceed *only* with necessary, verified steps.\n4.  **INCREMENTAL PROGRESS:** Break tasks into the **smallest possible, verifiable steps.** Plan -> Check Pre-condition -> Act (if needed) -> Check Result -> Repeat.\n5.  **ACKNOWLEDGE & REACT:** **ALWAYS** start your response by explicitly acknowledging the system output (success/failure/data) for actions from the **previous** message. Base your next plan/action on that outcome.\n\n**--- Personality & Approach ---**\n\n-   **Fact-Based & Skeptical:** Focus on technical accuracy and logical coherence. Assume nothing; verify everything.\n-   **Helpful & Thorough:** Go the extra mile for the user, but prioritize safety and correctness. Explore edge cases.\n-   **Clear & Organized:** Structure your responses logically. Explain your reasoning, verification steps, actions, and confirmations clearly.\n-   **Humor & Personality:** Inject a spark of personality or humor to make the interaction more engaging.\n-   **Internal Monologue:** Use *italicized text* for brief, simulated internal thoughts or planning steps.\n\n**--- Capabilities ---**\n\n1. Software Development\n  - Multi-language programming expertise\n  - Code analysis, generation, and refactoring\n  - Debugging and optimization\n  - Testing and documentation\n\n2. Project Management\n  - Project structure and workflow design\n  - Task tracking and organization\n  - Progress monitoring and reporting\n  - Resource management\n\n3. System Operations\n  - File system operations (read/write/manage)\n  - Task execution and monitoring\n  - Context management\n  - Web-based research \n\n-   Code: Python, JavaScript, etc. Analysis, refactoring, debugging.\n-   File Ops: Via Python `<execute>` (Read, write, check, list, manage paths).\n-   Search: Web (`<perplexity_search>`), Codebase (`<workspace_search>`), Memory (`<memory_search>`).\n-   Commands: Simple shell via `<execute_command>` (Use cautiously; prefer Python).\n-   Process Mgmt: `<process_*>` tools for background tasks.\n-   Browser: `<browser_*>` tools for web interaction.\n-   Context: Notes (`<add_*_note>`), Files (`context/` dir), Scratchpads (`context/TASK_SCRATCHPAD.md`).\n-   Vision: Image processing (if model supports).\n-   Task Mgmt: `<project_*>`, `<task_*>` tools.\n\n**--- Operational Environment ---**\n\n-   Workspace: All file operations relative to the base workspace directory. Manage paths carefully.\n-   OS: {os_info}\n-   Date/Time: {date} {time}\n-   Execution: IPython via `<execute>`. Use Python (`os`, `pathlib`, `shutil`, `re`, `json`) for reliability and safety.\n-   Context Window: {context_window} tokens (Manage proactively).\n\n**--- Critical Reminders ---**\n\n-   Action results appear in the **next** system message. Wait, acknowledge, verify, then proceed.\n-   Keep `<execute>` scripts **short, focused, and safe.** Adhere strictly to the safety mandate.\n-   Plan detailed steps, including verification checks, in a **scratchpad** file *before* execution.\n\n**System State:**\nCurrent Task: {task_info}\nCurrent Project: {project_info}\n\n\n## Notes\n\n- names should use snake_case without spaces\n- Progress updates should be strings (e.g., \'50%\')\n- Multiple actions can be combined in single responses\n- Context window management is automatic\n- Always verify operations before marking complete\n\nBe the best Penguin you can be!\n\n**Code Formatting Standard (TUI Compatibility):**\nWhenever you include source code in a response, enclose it in fenced Markdown blocks using triple back-ticks, followed by the language identifier. For example:\n```python\n<execute>\ndef hello():\n    print("Hello")\n</execute>\n```\nThis is required so the Textual TUI can apply proper syntax highlighting. Do **not** use indented code blocks; always use fenced blocks.\n\n## Development Workflow Outline\n\n### 1. Specification & Planning\n- Define clear objectives & acceptance criteria.\n- Break down into atomic, verifiable sub-tasks with pre-checks (document in scratchpad).\n\n### 2. Incremental Implementation & Verification Cycle\n- **Loop:**\n    - **Verify:** Perform the next necessary check based on the plan.\n    - **Evaluate:** Analyze verification result. Skip action if state is already correct.\n    - **Execute (If Needed):** Perform one small, targeted action.\n    - **Confirm:** Verify the action\'s outcome in the next turn.\n    - **Update Plan:** Mark step complete or adjust plan based on outcome.\n- **Repeat** until all sub-tasks are complete.\n\n### 3. Code & File Management Best Practices\n- **Use Enhanced Tools First:** Prefer enhanced file operations over raw Python whenever possible. Fallback to raw Python only if the enhanced tool is not working.\n- **Safety First:** Check existence (`os.path.exists`, `pathlib.Path.exists()`) *before* writing (`open(..., \'w\')`). Ask or back up before overwriting existing files unless explicitly told otherwise. Be cautious with deletions.\n- **Simplicity & Focus:** Keep `<execute>` blocks short, focused on one task. Use `pathlib` for path operations.\n- **Chunking:** Write long files incrementally, verifying each chunk.\n- **Mandatory Verification:** After file operations, *always* verify the result (existence, content) in the next step.\n\n### 3.1. Enhanced Tools Workflow\n- **Path Clarity:** Enhanced tools always show exact resolved paths to prevent confusion.\n- **Automatic Backups:** All editing operations create .bak files by default.\n- **Diff Generation:** Enhanced write shows what changed when modifying existing files.\n- **Clutter Filtering:** Enhanced list/find automatically filter out common clutter.\n- **Precise Edits:** Use apply_diff for targeted line-based changes, not just appending.\n- **Pattern Safety:** Use edit_with_pattern for safer regex-based replacements.\n- **Project Analysis:** Use analyze_project for AST-based codebase understanding.\n\n### 4. Error Handling & Debugging\n- Include basic error handling (`try...except`) in scripts.\n- Debugging: Analyze error -> Formulate specific hypothesis -> Add targeted checks (`print`, read file) to validate hypothesis -> Apply focused fix -> Verify fix.\n\n### 5. Completion\n- Ensure all requirements are met and verified through checks.\n- Document the final state and key decisions.\n\n### 2. Incremental Implementation & Verification Cycle\n- **Browser Tasks Specific Flow:**\n    1. `<browser_navigate>URL</browser_navigate >`\n    2. **Verify Navigation Success** (Acknowledge system message).\n    3. **IMMEDIATELY:** `<browser_screenshot></browser_screenshot >`\n    4. **Verify Screenshot** (Acknowledge system message).\n    5. **Analyze Screenshot:** Determine next step based *only* on visual context.\n    6. **Interact (If Needed):** `<browser_interact>...</browser_interact >`\n    7. **Verify Interaction Success** (Acknowledge system message).\n    8. **IMMEDIATELY:** `<browser_screenshot></browser_screenshot >`\n    9. **Verify Interaction Outcome** (Analyze new screenshot).\n    10. Repeat analysis/interaction/screenshot as needed.\n\n## Multi-Step Reasoning Process\n\nFollow this process rigorously for *every* task:\n\n1.  **Analyze & Plan:**\n    *   Understand the goal *thoroughly*. Clarify ambiguities if necessary.\n    *   Break the goal into a sequence of small, specific, verifiable steps.\n    *   Identify necessary *checks* (pre-conditions) for each action step.\n    *   Document this plan (e.g., in a scratchpad file like `context/TASK_SCRATCHPAD.md`).\n\n2.  **Verify Current State (Pre-Check):**\n    *   Execute the first necessary check identified in your plan. Use the most appropriate tool (`<execute>` with `os.path.exists`, `pathlib.Path.read_text`, `<workspace_search>`, etc.).\n\n3.  **Evaluate Verification & Decide Next Action:**\n    *   In your response, **acknowledge the results** of the verification action from the *previous* system message.\n    *   **CRITICAL:** Based *only* on the verified result:\n        *   If the check confirms the desired state *already exists* or the pre-condition is met: State this explicitly (e.g., "Verification confirmed `file.txt` exists. Skipping creation step.") and move to the *next verification step* or the *next part of the plan*.\n        *   If the check shows an action *is* needed: State this and proceed *only* with the single, necessary, planned action step.\n\n4.  **Execute (If Necessary):**\n    *   Perform the *one* small, focused action decided upon in the previous step.\n    *   Use the correct action tag (`<execute>`, `<perplexity_search>`, etc.).\n    *   Prioritize safety: Double-check code/commands, especially file writes (`\'w\'`), creates, or deletes. Re-confirm existence checks mentally before executing.\n\n5.  **Confirm Action Outcome (Post-Check):**\n    *   In your *next* response, **explicitly acknowledge the result** (success or error message) of the action executed in the *previous* system message.\n    *   Perform a verification check to confirm the action had the intended effect (e.g., does the file exist now? Does it have the correct content? Did the command output look right?).\n\n6.  **Reflect & Iterate:**\n    *   Update your plan based on the verified outcome of the action.\n    *   Proceed to the next *verification* step according to your updated plan.\n    *   If errors occurred, analyze the root cause using verification, adjust the plan, and try a focused fix.\n\n## Action Syntax\n\n**Core Principles Reminder:**\n- **Verify BEFORE Acting:** Check state before modifying.\n- **Safety First:** Avoid overwrites, confirm destructive actions.\n- **Acknowledge Results:** Confirm outcomes from the previous message before proceeding.\n\n---\n\n### Code Execution (`<execute>`)\n\nExecutes Python code within an IPython environment in the workspace. Use this for file operations, checks, data processing, etc.\n\n**Action Result Handling:**\nResults (stdout, stderr, errors) appear in the *next* system message. **You MUST wait for this message.** Your *next* response must:\n1.  **Acknowledge** the result explicitly (e.g., "The file check succeeded.", "The script failed with: [error message]").\n2.  **Verify** the outcome (e.g., check file existence/content).\n3.  **Proceed** based *only* on the verified outcome.\n\n**Example (Safe File Creation):**\n```python\n# <execute>\nimport os\nfrom pathlib import Path\n\nfile_path = Path(\'discord_clone/backend/src/controllers/auth.controller.js\')\nprint(f"Checking existence of: {file_path}")\n\nif not file_path.exists():\n    print(f"File does not exist. Creating...")\n    # Ensure parent directory exists\n    file_path.parent.mkdir(parents=True, exist_ok=True)\n    print(f"Ensured directory {file_path.parent} exists.")\n    # Write content (replace with actual content variable)\n    content_to_write = "console.log(\'Auth Controller\');"\n    try:\n        file_path.write_text(content_to_write, encoding=\'utf-8\')\n        print(f"Successfully created and wrote to {file_path}")\n    except Exception as e:\n        print(f"Error writing to file {file_path}: {e}")\nelse:\n    print(f"File {file_path} already exists. No action taken.")\n# </execute>\n```\n\n**CRITICAL SAFETY WARNINGS for `<execute>`:**\n-   **NEVER use `open(path, \'w\')` or `Path(path).write_text()` without FIRST checking `os.path.exists(path)` or `Path(path).exists()`.**\n-   If the file exists, **DO NOT OVERWRITE** unless explicitly instructed or you have stated a clear, verified reason (e.g., content is incorrect based on a prior read). Prefer reading, modifying specific lines, or creating backups if modification is needed. **State your intent clearly before modifying existing files.**\n-   Be equally cautious with `os.remove`, `shutil.rmtree`, `os.makedirs(exist_ok=False)`, `Path.unlink()`, `shutil.rmtree()`. Verify targets and confirm intent.\n-   Use `pathlib` for safer and easier path manipulation and checks (`Path.exists()`, `Path.is_file()`, `Path.read_text()`, `Path.write_text()`, `Path.mkdir()`).\n-   Ensure parent directories exist before writing files (`file_path.parent.mkdir(parents=True, exist_ok=True)`).\n\n**Other Notes for `<execute>`:**\n-   Keep scripts **short and focused** (one logical operation per block).\n-   Write long files **incrementally**, verifying each chunk.\n-   Include `print()` statements for status updates and verification points.\n-   Use `try...except` for error handling within scripts.\n-   Manage paths explicitly using `os.getcwd()`, `Path.cwd()`, and `os.path.join()` or `pathlib` operators. `cd` does not persist.\n\n---\n\n### Command Execution (`<execute_command>`)\n\nExecutes a shell command in the workspace root. **Use sparingly and cautiously.**\n\n**Example:**\n`<execute_command>ls -l discord_clone/backend/src</execute_command >`\n\n**Notes:**\n-   Best for simple, **read-only** commands (`ls`, `pwd`, `git status`, `grep`).\n-   **AVOID file modification commands** (`rm`, `mv`, `mkdir`, `echo > file`). Use `<execute>` with Python\'s `os`, `pathlib`, or `shutil` for safety and control.\n-   **`cd` does NOT persist.** Use full or workspace-relative paths in commands.\n-   Acknowledge and verify output in the next message. If errors occur, prefer retrying with `<execute>` and Python\'s `subprocess` for better diagnostics if necessary.\n\n---\n\n### Enhanced File Operations\n\n**IMPORTANT:** These enhanced tools provide better path handling and feedback than basic file operations. Use these instead of raw Python file operations whenever possible.\n\n1.  **Enhanced File Reading (`<enhanced_read>`):**\n    `<enhanced_read>path:show_line_numbers:max_lines</enhanced_read>`\n    -   **Always shows exact resolved path** to prevent path confusion.\n    -   `show_line_numbers` (true/false): Include line numbers in output.\n    -   `max_lines` (optional): Limit output to first N lines.\n    -   Example: `<enhanced_read>src/main.py:true:50</enhanced_read>`\n\n2.  **Enhanced File Writing (`<enhanced_write>`):**\n    `<enhanced_write>path:content:backup</enhanced_write>`\n    -   **Creates automatic backups** and shows exact resolved path.\n    -   **Generates diff** when modifying existing files.\n    -   `backup` (true/false): Create .bak file (default: true).\n    -   Example: `<enhanced_write>config.py:print("Hello"):true</enhanced_write>`\n\n3.  **Enhanced File Listing (`<list_files_filtered>`):**\n    `<list_files_filtered>path:group_by_type:show_hidden</list_files_filtered>`\n    -   **Automatically filters clutter** (.git, __pycache__, node_modules, etc.).\n    -   `group_by_type` (true/false): Group files by extension.\n    -   `show_hidden` (true/false): Include hidden files.\n    -   Example: `<list_files_filtered>src:true:false</list_files_filtered>`\n\n4.  **Enhanced File Finding (`<find_files_enhanced>`):**\n    `<find_files_enhanced>pattern:search_path:include_hidden:file_type</find_files_enhanced>`\n    -   **Supports glob patterns** (*.py, main.py, etc.).\n    -   `pattern`: File pattern to search for.\n    -   `search_path`: Directory to search in (default: current).\n    -   `include_hidden` (true/false): Include hidden files.\n    -   `file_type`: Filter by "file" or "directory".\n    -   Example: `<find_files_enhanced>*.py:src:false:file</find_files_enhanced>`\n\n---\n\n### File Editing Operations\n\n**CRITICAL:** These tools edit files directly. Always verify the current state first.\n\n1.  **Apply Unified Diff (`<apply_diff>`):**\n    `<apply_diff>file_path:diff_content:backup</apply_diff>`\n    -   **Applies unified diff format** to make precise edits.\n    -   **Targets specific lines** - does not just append content.\n    -   Creates backup by default.\n    -   Example with diff content:\n    ```\n    <apply_diff>src/main.py:--- a/src/main.py\n    +++ b/src/main.py\n    @@ -1,3 +1,4 @@\n     def hello():\n    +    ""Say hello.""\n         print("Hello")\n    :true</apply_diff>\n    ```\n\n2.  **Pattern-Based Editing (`<edit_with_pattern>`):**\n    `<edit_with_pattern>file_path:search_pattern:replacement:backup</edit_with_pattern>`\n    -   **Uses regex patterns** for find-and-replace operations.\n    -   Safer than manual string replacement.\n    -   Example: `<edit_with_pattern>config.py:DEBUG = False:DEBUG = True:true</edit_with_pattern>`\n\n---\n\n### File Comparison and Analysis\n\n1.  **Enhanced Diff (`<enhanced_diff>`):**\n    `<enhanced_diff>file1:file2:semantic</enhanced_diff>`\n    -   **Compare two files** with contextual diff output.\n    -   `semantic` (true/false): For Python files, shows added/removed functions/classes.\n    -   Example: `<enhanced_diff>old_config.py:new_config.py:true</enhanced_diff>`\n\n2.  **Project Structure Analysis (`<analyze_project>`):**\n    `<analyze_project>directory:include_external</analyze_project>`\n    -   **Analyzes codebase structure** using AST parsing.\n    -   Shows file stats, imports, functions, and classes.\n    -   `include_external` (true/false): Include external library imports.\n    -   Example: `<analyze_project>src:false</analyze_project>`\n\n---\n\n### Search Operations\n\nUse for information retrieval. Acknowledge results before acting.\n\n1.  **Web Search (`<perplexity_search>`):**\n    `<perplexity_search>query:max_results</perplexity_search >`\n    -   External, current info (docs, concepts, news). Max 5 results.\n    -   Example: `<perplexity_search>python requests library usage:3</perplexity_search >`\n\n2.  **Codebase Search (`<workspace_search>`):**\n    `<workspace_search>query:max_results</workspace_search >`\n    -   **Use FIRST** for finding code (functions, classes, variables) in the project.\n    -   Example: `<workspace_search>class UserSchema:5</workspace_search >`\n\n3.  **Memory Search (`<memory_search>`):**\n    `<memory_search>query:k:memory_type:categories</memory_search >`\n    -   Search conversation history, indexed files, and notes.\n    -   `k`, `memory_type`, `categories` (comma-separated) are optional.\n    -   Example: `<memory_search>database connection string discussion:5:all:database,config</memory_search >`\n    -   Example: `<memory_search>user preferences</memory_search >`\n\n---\n\n### Workspace & Memory Management\n\n-   `<analyze_codebase>directory:type</analyze_codebase>`\n    -   Analyze codebase structure. `type` can be `dependencies`, `complexity`, etc.\n    -   Example: `<analyze_codebase>src:dependencies</analyze_codebase>`\n-   `<reindex_workspace>directory:force_full</reindex_workspace>`\n    -   Trigger a manual re-index of the workspace to update the memory.\n    -   Example: `<reindex_workspace>src:true</reindex_workspace>`\n\n---\n\n### Interactive Terminal (`process_*` tools)\n\nManage long-running background processes.\n\n-   `<process_start>name: command</process_start >`\n-   `<process_stop>name</process_stop >`\n-   `<process_status>name</process_status >`\n-   `<process_list></process_list >`\n-   `<process_enter>name</process_enter >`\n-   `<process_send>command</process_send >`\n-   `<process_exit></process_exit >`\n\n**Notes:** Check status/list before start/stop. Always `process_exit`.\n\n---\n\n### Memory Management (`add_*_note`)\n\nPreserve context using notes.\n\n-   `<add_summary_note>category:content</add_summary_note >` (Decisions, progress, errors)\n-   `<add_declarative_note>category:content</add_declarative_note >` (Facts, requirements)\n\n**Notes:** Summarize proactively. Use categories (e.g., `decisions`, `errors`, `requirements`, `file_changes`).\n\n---\n\n### Task Management (`project_*`, `task_*` tools)\n\nTrack high-level plan progress.\n\n-   Project Ops: `<project_create>`, `<project_update>`, `<project_delete>`, `<project_list>`, `<project_display>`\n-   Task Ops: `<task_create>`, `<task_update>`, `<task_complete>`, `<task_delete>`, `<task_list>`, `<task_display>`\n-   Dependencies: `<dependency_display>`\n\n**Notes:** Update/complete tasks *after* verifying the corresponding step is done.\n\n---\n\n\n**Notes:**\n-   Navigate first. Use specific selectors.\n-   **MANDATORY WORKFLOW:**\n    1.  After **every** successful browser action, your **immediate next step MUST be `<pydoll_browser_screenshot>`**.\n    2.  **Analyze the screenshot** to understand the visual context before deciding on the next interaction.\n    3.  After **every** `<pydoll_browser_interact>` action (like click or input), your **immediate next step MUST be `<pydoll_browser_screenshot>`** to verify the result of the interaction visually.\n-   Verify state with screenshots *before* proceeding.\n\n### PyDoll Browser Interaction (`pydoll_browser_*` tools)\n\nEnhanced browser control without WebDriver dependencies, better for sites with anti-bot measures.\n\n-   `<pydoll_browser_navigate>URL</pydoll_browser_navigate >`\n-   `<pydoll_browser_interact>action:selector[:selector_type][:text]</pydoll_browser_interact >` (actions: `click`, `input`, `submit`, selector_types: `css`, `xpath`, `id`, `class_name`)\n-   `<pydoll_browser_screenshot></pydoll_browser_screenshot >`\n-   `<pydoll_debug_toggle>[on|off]</pydoll_debug_toggle >` (Enable/disable detailed PyDoll logging and outputs)\n\n**Advantages over standard browser tools:**\n-   **No WebDriver dependency** - eliminates compatibility issues\n-   **Native captcha bypass** - better handles Cloudflare Turnstile and reCAPTCHA v3\n-   **Human-like interactions** - reduces detection risk\n-   **More selector options** - supports CSS, XPath, ID, and class name selectors\n-   **Developer mode** - toggle detailed debugging information when troubleshooting\n\n**Usage Notes:**\n-   Use for sites with sophisticated bot detection\n-   Follow the same workflow as standard browser tools (navigate → screenshot → interact → screenshot)\n-   Use selector_type parameter to specify how to locate elements (default is CSS)\n-   Enable debug mode when troubleshooting: `<pydoll_debug_toggle>on</pydoll_debug_toggle >`\n-   Example: `<pydoll_browser_interact>click:button.search:css</pydoll_browser_interact >`\n\n**Developer Mode:**\n-   When enabled, provides detailed logs about browser interactions\n-   Shows additional information in command outputs (page titles, element text, etc.)\n-   Helps diagnose issues with selectors or page navigation\n-   Toggle with: `<pydoll_debug_toggle>on</pydoll_debug_toggle >` or `<pydoll_debug_toggle>off</pydoll_debug_toggle >`\n\n---\n\n# Penguin Development Best Practices\n\n## Core Mindset\n- **Verify BEFORE & AFTER:** Check state before modifying; check results after modifying. Your actions *depend* on these checks.\n- **Safety is Paramount:** Never overwrite files blindly. `os.path.exists()` is your best friend before `open(..., \'w\')`. Use `pathlib`.\n- **Tiny Steps:** Break tasks into the smallest verifiable units. Plan -> Check -> Act (if needed) -> Check Result -> Repeat.\n- **Keep it Simple:** Write straightforward code/scripts. Use built-ins (`os`, `pathlib`) over complex solutions when possible.\n\n## Code Management\n- `<execute>` blocks = one logical operation (check, write small chunk, run simple command).\n- Incremental writes for long files, with verification between chunks.\n- Confirm intent before overwriting or deleting.\n- Path Awareness: use resolved paths to prevent confusion.\n\n## Debugging Strategy (Evidence-Based)\n1.  **Analyze:** Understand the error message and context fully.\n2.  **Hypothesize:** Formulate 2-3 *specific*, *testable* ideas about the cause.\n3.  **Test Hypothesis:** Add `print()` statements, check file contents, or run simple commands *specifically designed* to prove or disprove your hypotheses.\n4.  **Fix:** Apply a fix based *only* on the evidence from your tests.\n5.  **Verify Fix:** Run the code again or perform checks to confirm the issue is resolved.\n\n## Context Maintenance\n- **Plan First:** Use scratchpads (`context/TASK_SCRATCHPAD.md`) for detailed planning *before* execution.\n- **Track After:** Use trackers (`context/TRACK.md`) for *concise* progress updates *after* verification.\n- **Document:** Record key decisions, complex logic, errors encountered, and solutions tried in context files.\n\n## Completion Phrases Usage Guide\n\n**Use ONLY at the very end of your message.**\n\n### TASK_COMPLETED\n- Use ONLY when a specific, user-initiated task (e.g., from `/run task_name` or the initial request in a non-continuous run) is **fully verified** as complete against *all* its original requirements.\n- **Do NOT use** after completing just one sub-step of a larger plan.\n- Briefly summarize the completed task.\n- When writing the TASK_COMPLETED phrase, don\'t use any other text or markdown formatting. Example:\nGOOD: \nTASK_COMPLETED\n\nBAD:\n**TASK_COMPLETED**\n\nIf you try to use any other text or markdown formatting, the system will not recognize it as a valid completion phrase.\n\n\n### CONTINUOUS_COMPLETED\n- Use ONLY when the *overall objective* of a continuous mode session (`/run --247`) is **fully verified** as achieved, and there are no further planned or reasonably inferable next steps based on the project context.\n- Include a comprehensive summary of the session\'s accomplishments.\n\n### NEED_USER_CLARIFICATION\n- Use ONLY in continuous mode (`/run --247`) when **blocked** and user input is **required** to proceed.\n- Clearly explain *what specific information or decision* is needed and *why*. Document the current state precisely.\n\n### EMERGENCY_STOP\n- Use ONLY for critical, unrecoverable errors, potential security risks, or situations demanding immediate halt. Briefly explain why.\n\n### General Guidelines\n- Your reasoning must justify the phrase. Explain *why* the task/session is complete or why clarification is needed *before* using the phrase.\n\n## Large Codebase Navigation\n\n### Discovery First\n- Start with high-level structure: `find . -type f -name "*.py" | head -20`\n- Use `workspace_search` for semantic understanding\n- Build mental map using README files and documentation\n\n### Chunked Reading Strategy\n- Check file size before reading: `wc -l filename`\n- For files >500 lines, read in strategic chunks:\n  1. First 50 lines (imports, class definitions)\n  2. Search for specific functions/classes\n  3. Read around specific line numbers\n- Document findings in context notes for future reference\n\n### Handling Large Codebases (Dynamic Mapping & Ingestion)\n  For repos >1K lines, avoid full loads—use mapping/locating first [1]:\n  - Map dynamically: Via <execute> with stdlib (e.g., import os, glob, pathlib; use os.walk(dir) for tree, glob.glob(\'**/*.py\') for patterns).\n  - Build overviews: Create file maps/summaries in notes (<add_summary_note>); e.g., "Scan src/ for .py files, list with one-line summaries."\n  - Targeted ingest: Semantic search (<workspace_search>) on map, then chunk reads (750 lines max via read_file); parse with AST per chunk.\n  - Agent flow: Locate (stdlib), summarize hierarchy, ingest relevant parts incrementally; store maps to combat amnesia [4].\n  - Example: <execute>import glob; py_files = glob.glob(\'**/*.py\', recursive=True); print([f + \': \' + open(f).readline().strip() for f in py_files])</execute> for quick map.\n\n### Mapping/Locating Tools (Stdlib Integration)\n  For discovery in large codebases:\n  - Use os/glob/pathlib safely: Verify paths (os.path.exists), avoid destructive ops.\n  - Patterns: glob.glob(\'src/**/*.ts\') for files; os.walk(\'.\') for traversal.\n  - Combine with AST: Locate files, then ast.parse() chunks for analysis.\n  - Security: Never map sensitive dirs (e.g., ignore .env via patterns) [1].\n\n### Progressive Understanding\n- Create `context/codebase_map.md` to track discoveries\n- Note key files, their purposes, and relationships\n- Update map as understanding deepens\n\n## Tool Learning & Memory Integration\n\n### Tool Discovery Process\n1. List available tools when starting new task type\n2. Read tool documentation before first use\n3. Start with simple test cases to understand behavior\n4. Document successful patterns in memory\n\n### Memory Usage Patterns\n- **Before starting tasks**: Search memory for similar past work\n- **During exploration**: Add findings to declarative memory\n- **After completion**: Summarize approach and lessons learned\n- **On errors**: Document what didn\'t work and why\n\n### Conservative vs Creative Balance (70/30 Rule)\n- 70% Conservative: Use proven tools and patterns from memory/docs\n- 30% Creative: When stuck, try alternative approaches with:\n  - Clear hypothesis about why it might work\n  - Rollback plan ready\n  - Documentation of the experiment\n\n## Code Analysis & AST Usage\n\n### When to Use AST Analysis\n- Refactoring across multiple files\n- Understanding complex inheritance hierarchies  \n- Finding all usages of a function/class\n- Analyzing code patterns and anti-patterns\n\n### AST Tools Available\n- Python: `ast` module for parsing and analysis\n- General: `grep` with regex for simple pattern matching\n\n### Progressive Analysis Strategy\n1. Start with grep/workspace_search for quick findings\n2. Use AST when you need structural understanding\n3. Combine both for comprehensive analysis\n4. Cache AST results in memory for repeated queries\n'}, {'role': 'user', 'content': 'Hi there! to test please create a file called TUI_text27.txt'}, {'role': 'assistant', 'content': 'I\'ll create the file TUI_text27.txt for you. Let me start by checking if it exists first, then create it.\n\n<execute>\nimport osfrom pathlib import Pathfile_path = Path(\'TUI_text27.txt\')\nprint(f"Checking existence of: {file_path}")\nprint(f"Current working directory: {Path.cwd()}")\n\nif not file_path.exists():\n print("File does not exist, creating...")\n file_path.write_text("Test file created by Penguin at2024-10-27")\n print("File created successfully")\nelse:\n print("File already exists")\n</execute>'}, {'role': 'tool', 'tool_call_id': 'call_955a42f5', 'content': 'Checking existence of: TUI_text27.txt\nCurrent working directory: /Users/maximusputnam/penguin_workspace\nFile does not exist, creating...\nFile created successfully', 'name': 'execute'}], 'model': 'moonshotai/kimi-k2', 'max_tokens': 15750, 'stream': True, 'temperature': 0.7}}
2025-08-07 22:40:34,611 DEBUG openai._base_client: Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-07 22:40:34,612 DEBUG httpcore.http11: send_request_headers.started request=<Request [b'POST']>
2025-08-07 22:40:34,612 DEBUG httpcore.http11: send_request_headers.complete
2025-08-07 22:40:34,612 DEBUG httpcore.http11: send_request_body.started request=<Request [b'POST']>
2025-08-07 22:40:34,612 DEBUG httpcore.http11: send_request_body.complete
2025-08-07 22:40:34,612 DEBUG httpcore.http11: receive_response_headers.started request=<Request [b'POST']>
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,614 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,615 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,616 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,617 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,618 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,622 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,623 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,624 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,625 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=7,level=0,tokens=4), 7, 16, False
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 8, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,626 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 9, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 10, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,627 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 11, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 12, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=7,level=0,tokens=4), 13, 16, True
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:34,628 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=15,level=0,tokens=7), 15, 16, False
2025-08-07 22:40:35,339 DEBUG httpcore.http11: receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 08 Aug 2025 03:40:35 GMT'), (b'Content-Type', b'text/event-stream'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-RAY', b'96bbfe3ccdced1b6-ATL'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-cache'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare')])
2025-08-07 22:40:35,339 DEBUG openai._base_client: HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Fri, 08 Aug 2025 03:40:35 GMT', 'content-type': 'text/event-stream', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '96bbfe3ccdced1b6-ATL', 'access-control-allow-origin': '*', 'cache-control': 'no-cache', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare'})
2025-08-07 22:40:35,340 DEBUG openai._base_client: request_id: None
2025-08-07 22:40:35,340 DEBUG httpcore.http11: receive_response_body.started request=<Request [b'POST']>
2025-08-07 22:40:35,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 0: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 0 had no text/reasoning/tool delta.
2025-08-07 22:40:35,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 1: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Perfect', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,341 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Perfect'
2025-08-07 22:40:35,341 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,341 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,343 ERROR __main__: Error updating markdown widget: No nodes match 'Markdown' on ChatMessage(classes='streaming')
2025-08-07 22:40:35,344 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,345 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,349 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 2: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='!', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,349 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '!'
2025-08-07 22:40:35,349 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,349 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,350 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,368 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 3: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' I've', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,368 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' I've'
2025-08-07 22:40:35,368 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,368 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,369 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,370 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,370 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,370 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,370 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,386 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 4: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' successfully', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,386 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' successfully'
2025-08-07 22:40:35,386 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,386 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,387 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,394 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,394 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,398 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,399 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,399 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,399 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,399 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,399 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,400 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,415 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 5: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' created', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,415 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' created'
2025-08-07 22:40:35,416 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,416 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,416 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,417 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,428 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 6: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' the', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,428 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' the'
2025-08-07 22:40:35,428 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,428 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,429 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,444 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 7: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' test', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,444 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' test'
2025-08-07 22:40:35,444 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,444 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,445 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,462 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 8: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,462 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:35,462 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,462 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,462 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,463 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,492 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 9: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' **', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,492 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' **'
2025-08-07 22:40:35,492 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,492 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,493 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,494 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,494 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,494 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,510 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 10: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='T', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,510 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'T'
2025-08-07 22:40:35,510 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,510 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,511 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,518 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 11: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='UI', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,518 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'UI'
2025-08-07 22:40:35,519 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,519 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,519 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,544 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 12: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='_text', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,544 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '_text'
2025-08-07 22:40:35,544 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,544 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,545 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,562 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 13: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='27', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,562 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '27'
2025-08-07 22:40:35,562 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,562 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,563 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,578 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 14: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.txt', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,579 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.txt'
2025-08-07 22:40:35,579 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,579 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,579 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,598 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 15: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='**', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,598 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '**'
2025-08-07 22:40:35,598 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,598 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,599 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,614 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 16: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' in', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,614 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' in'
2025-08-07 22:40:35,614 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,614 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,615 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,649 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 17: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' your', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,649 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' your'
2025-08-07 22:40:35,649 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,649 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,650 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,664 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 18: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' workspace', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,664 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' workspace'
2025-08-07 22:40:35,664 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,664 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,665 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 19: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,678 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.'
2025-08-07 22:40:35,678 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,678 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,679 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,693 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 20: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' The', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,693 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' The'
2025-08-07 22:40:35,694 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,694 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,694 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,714 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 21: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,714 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:35,714 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,714 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,715 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,730 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 22: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' contains', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,730 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' contains'
2025-08-07 22:40:35,731 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,731 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,731 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
2025-08-07 22:40:35,748 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 23: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=':

', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,748 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ':

'
2025-08-07 22:40:35,748 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,748 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,749 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 2, False
2025-08-07 22:40:35,767 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 24: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='```
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,767 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '```
'
2025-08-07 22:40:35,767 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,767 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:35,768 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-08-07 22:40:35,786 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 25: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='Test', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,786 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'Test'
2025-08-07 22:40:35,786 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,786 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,786 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,787 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,787 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,787 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,787 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,805 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 26: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,805 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:35,806 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,806 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,817 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,818 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,831 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 27: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' created', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,831 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' created'
2025-08-07 22:40:35,831 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,831 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,832 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,845 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 28: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' by', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,845 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' by'
2025-08-07 22:40:35,845 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,845 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,846 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,871 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 29: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' Penguin', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,871 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' Penguin'
2025-08-07 22:40:35,871 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,871 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,878 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,879 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,879 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,896 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 30: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' at', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,896 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' at'
2025-08-07 22:40:35,896 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,896 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,897 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,901 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 31: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' ', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,919 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 32: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='202', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,919 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '202'
2025-08-07 22:40:35,919 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,919 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,920 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,938 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 33: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='4', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,938 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '4'
2025-08-07 22:40:35,939 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,939 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,947 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,956 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,961 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 34: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='-', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,962 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '-'
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,962 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,963 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,966 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:35,988 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 35: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='10', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:35,989 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '10'
2025-08-07 22:40:35,994 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:35,995 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,000 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,021 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,032 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 36: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='-', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,032 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,033 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '-'
2025-08-07 22:40:36,033 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,033 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,033 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,033 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,037 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 37: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='27', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,041 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '27'
2025-08-07 22:40:36,041 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,041 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,047 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 38: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='
', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,054 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,064 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 39: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='```

', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '```

'
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,065 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,066 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,066 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,066 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,066 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,068 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 4, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:36,071 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 5, False
2025-08-07 22:40:36,074 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 40: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='The', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,074 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: 'The'
2025-08-07 22:40:36,074 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,074 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,076 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,100 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 41: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' file', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,100 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' file'
2025-08-07 22:40:36,100 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,100 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,101 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,114 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 42: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' is', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,114 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' is'
2025-08-07 22:40:36,114 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,114 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,115 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,129 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 43: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' now', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,129 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' now'
2025-08-07 22:40:36,129 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,129 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,130 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,210 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 44: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' ready', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,210 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' ready'
2025-08-07 22:40:36,210 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,210 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,211 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 45: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' for', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,211 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' for'
2025-08-07 22:40:36,211 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,211 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,211 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 46: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' your', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,211 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' your'
2025-08-07 22:40:36,211 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,211 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,211 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 47: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' testing', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,212 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' testing'
2025-08-07 22:40:36,212 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,212 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,212 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,212 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,213 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,215 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,220 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,221 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,222 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 48: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent=' purposes', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,222 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: ' purposes'
2025-08-07 22:40:36,222 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,222 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,225 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,228 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,228 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,228 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,228 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,229 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,231 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,245 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 49: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='.', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,245 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Calling stream_callback with content segment: '.'
2025-08-07 22:40:36,245 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,245 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content_so_far', 'reasoning_so_far', 'metadata', 'is_reasoning']
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,246 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,265 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 50: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=stop, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,265 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 50 had no text/reasoning/tool delta.
2025-08-07 22:40:36,284 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Raw Chunk 51: ID=gen-1754624434-guvOiR7vgxFBJ8YRIHYe, Model=moonshotai/kimi-k2, FinishReason=None, DeltaContent='', DeltaReasoning='None', DeltaTools='None'
2025-08-07 22:40:36,284 DEBUG penguin.llm.openrouter_gateway: [OpenRouterGateway] Chunk 51 had no text/reasoning/tool delta.
2025-08-07 22:40:36,284 DEBUG httpcore.http11: receive_response_body.complete
2025-08-07 22:40:36,284 DEBUG httpcore.http11: response_closed.started
2025-08-07 22:40:36,284 DEBUG httpcore.http11: response_closed.complete
2025-08-07 22:40:36,285 INFO penguin.llm.api_client: [APIClient:970792ee] Stream finished. Returning accumulated text (length: 207).
2025-08-07 22:40:36,285 DEBUG penguin.utils.parser: No properly formed action tags found in content
2025-08-07 22:40:36,290 DEBUG penguin.system.session_manager: Saved session session_20250807_224014_44909114 with 7473 tokens
2025-08-07 22:40:36,290 DEBUG penguin.system.checkpoint_manager: Enqueued checkpoint creation: cp_20250807_224036_1f9a0730
2025-08-07 22:40:36,290 DEBUG penguin.core: Core emit_ui_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:36,290 DEBUG penguin.core: Emitting UI event: stream_chunk with data keys: ['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:36,290 DEBUG __main__: TUI handle_core_event stream_chunk keys=['stream_id', 'chunk', 'is_final', 'message_type', 'role', 'content', 'reasoning', 'metadata']
2025-08-07 22:40:36,329 DEBUG penguin.system.checkpoint_manager: Created checkpoint file: cp_20250807_224036_1f9a0730
2025-08-07 22:40:36,329 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,329 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.blockquote: entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.hr: entering hr: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.list: entering list: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.reference: entering reference: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.html_block: entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.heading: entering heading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.lheading: entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.paragraph: entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.code: entering code: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,333 DEBUG markdown_it.rules_block.fence: entering fence: StateBlock(line=2,level=0,tokens=3), 2, 6, False
2025-08-07 22:40:36,340 DEBUG penguin.engine: Conversation completion: No actions in response
2025-08-07 22:40:36,341 DEBUG penguin.core: Core emit_ui_event token_update keys=['total', 'sessions', 'MessageCategory.SYSTEM', 'MessageCategory.CONTEXT', 'MessageCategory.DIALOG', 'MessageCategory.SYSTEM_OUTPUT', 'MessageCategory.ERROR', 'MessageCategory.INTERNAL', 'MessageCategory.UNKNOWN', 'chain_total', 'current_total_tokens', 'max_tokens', 'available_tokens', 'percentage', 'categories']
2025-08-07 22:40:36,341 DEBUG penguin.core: Emitting UI event: token_update with data keys: ['total', 'sessions', 'MessageCategory.SYSTEM', 'MessageCategory.CONTEXT', 'MessageCategory.DIALOG', 'MessageCategory.SYSTEM_OUTPUT', 'MessageCategory.ERROR', 'MessageCategory.INTERNAL', 'MessageCategory.UNKNOWN', 'chain_total', 'current_total_tokens', 'max_tokens', 'available_tokens', 'percentage', 'categories']
2025-08-07 22:40:36,341 DEBUG __main__: TUI handle_core_event token_update keys=['total', 'sessions', 'MessageCategory.SYSTEM', 'MessageCategory.CONTEXT', 'MessageCategory.DIALOG', 'MessageCategory.SYSTEM_OUTPUT', 'MessageCategory.ERROR', 'MessageCategory.INTERNAL', 'MessageCategory.UNKNOWN', 'chain_total', 'current_total_tokens', 'max_tokens', 'available_tokens', 'percentage', 'categories']
2025-08-07 22:40:36,342 DEBUG penguin.cli.interface: Core.process completed with response keys: dict_keys(['assistant_response', 'iterations', 'action_results', 'status', 'execution_time'])
2025-08-07 22:40:36,342 DEBUG penguin.cli.interface: Updating token display
2025-08-07 22:40:36,342 DEBUG penguin.cli.interface: Normalized action results: [{'action_name': 'execute', 'output': 'Checking existence of: TUI_text27.txt\nCurrent working directory: /Users/maximusputnam/penguin_workspace\nFile does not exist, creating...\nFile created successfully', 'status': 'completed', 'action': 'execute', 'result': 'Checking existence of: TUI_text27.txt\nCurrent working directory: /Users/maximusputnam/penguin_workspace\nFile does not exist, creating...\nFile created successfully'}]
2025-08-07 22:41:14,341 DEBUG penguin.system.session_manager: Saved session session_20250807_224014_44909114 with 7473 tokens
2025-08-07 22:42:14,360 DEBUG penguin.system.session_manager: Saved session session_20250807_224014_44909114 with 7473 tokens
2025-08-07 22:43:14,390 DEBUG penguin.system.session_manager: Saved session session_20250807_224014_44909114 with 7473 tokens
2025-08-07 22:44:14,398 ERROR penguin.system.session_manager: Error saving session session_20250807_224014_44909114: [Errno 28] No space left on device: '/Users/maximusputnam/penguin_workspace/conversations/session_20250807_224014_44909114.json.temp'
2025-08-07 22:44:23,820 DEBUG asyncio: Using selector: KqueueSelector
