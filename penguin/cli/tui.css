/* ===============================================
   Penguin TUI Theme System
   Default Theme: Deep Ocean
   =============================================== */

Screen {
    layout: vertical;
    background: #0c141f;
    color: #dadada;
}

/* ===============================================
   Core Layout Components
   =============================================== */

Header {
    dock: top;
    height: 1;
    background: #1a2a3f;
    color: #89cff0;
    text-align: center;
}

Footer {
    dock: bottom;
    height: 1;
    background: #1a2a3f;
}

Footer .footer--key {
    background: #334e68;
    color: #89cff0;
}

Footer .footer--highlight-key {
    background: #89cff0;
    color: #0c141f;
}

#main-container {
    layout: vertical;
    padding: 0 1;
    height: 1fr;
}

#message-area {
    height: 1fr;
    width: 100%;
    scrollbar-gutter: stable;
    min-height: 0; /* ensure scroll container shrinks to content */
}

#input-box {
    border: round #89cff0;
    height: 3;
    background: #1a2a3f;
    color: #dadada;
    margin: 1 0 0 0;
}

#input-box:focus {
    border: round #b3e5fc;
}

#status-bar {
    dock: bottom;
    height: 1;
    background: #1a2a3f;
    color: #a0a0a0;
    padding: 0 1;
    text-align: left;
}

/* ===============================================
   Chat Message Styling
   =============================================== */

ChatMessage {
    padding: 1 2;
    margin: 1 0;
    background: #101c2c;
    border: round #334e68;
    width: 100%;
    height: auto;
    layout: vertical;
}

.message-label {
    height: auto;
    margin-bottom: 1;
}

.message-content {
    height: auto;
    margin: 0;           /* remove default block margins */
    min-height: 0;       /* prevent reserved vertical space */
}

/* Role-specific colors */
ChatMessage .user {
    color: #e0e0e0;
}

ChatMessage .assistant {
    color: #c8e6c9;
}

ChatMessage .system {
    color: #fff59d;
}

ChatMessage .error {
    color: #ffcdd2;
    background: #b71c1c;
}

/* Style for streaming messages */
ChatMessage.streaming {
    border: round #89cff0;
    background: #1a2a3f;
}

/* Focus outline for keyboard navigation */
ChatMessage:focus {
    border: round #89cff0;
    background: #162436;
}

/* Code block inside messages */
.code-block {
    padding: 0 1;
    margin-top: 1;
    margin-bottom: 1;
}

/* ===============================================
   Tool Execution Widget Styles
   =============================================== */

.tool-execution {
    /* Remove bottom margin on the card to avoid large trailing gaps */
    margin: 1 0 0 0;
    padding: 1;
    background: #101c2c;
    border: round #334e68;
}

.tool-execution:focus {
    border: round #89cff0;
    background: #162436;
}

.tool-container {
    layout: vertical;
    width: 100%;
}

.tool-header {
    padding: 1;
    background: #1a2a3f;
    border-bottom: solid #334e68;
    text-style: bold;
}

.tool-params-section {
    /* Override base Collapsible margin (1 0) to remove bottom gap */
    margin: 1 0 0 0;
    background: #162436;
    border: round #334e68;
    padding: 0;
}

.tool-params-content {
    padding: 1;
    color: #a0a0a0;
    min-height: 0;
    margin: 0;
}

.tool-result-section {
    /* Override base Collapsible margin (1 0) to remove bottom gap */
    margin: 1 0 0 0;
    background: #162436;
    border: round #334e68;
    padding: 0;
    min-height: 0;
}

.tool-result-content {
    padding: 1;
    min-height: 0;
    margin: 0;
}

/* Tool status colors */
.tool-status-pending {
    color: #ffd54f;
}

.tool-status-running {
    color: #ffeb3b;
    text-style: bold;
}

.tool-status-success {
    color: #66bb6a;
}

.tool-status-failed {
    color: #ef5350;
}

.tool-status-cancelled {
    color: #757575;
}

/* ===============================================
   Collapsible Sections
   =============================================== */

Collapsible {
    background: #101c2c;
    border: round #334e68;
    margin: 1 0;
    min-height: 0;
}

/* Inside tool cards, trim Collapsible bottom margin further */
.tool-execution Collapsible {
    margin: 1 0 0 0;
    min-height: 0;
}

Collapsible > .label {
    padding: 1;
    background: #1a2a3f;
    color: #89cff0;
}

Collapsible:focus > .label {
    background: #162436;
    color: #b3e5fc;
}

/* ===============================================
   Utility Classes
   =============================================== */

.hidden {
    display: none;
}

.dim {
    opacity: 0.7;
}

.error-text {
    color: #ffcdd2;
}

.success-text {
    color: #66bb6a;
}

.warning-text {
    color: #ffd54f;
}

/* Reasoning / blockquote styling */
Markdown BlockQuote {
    color: #a0a0a0;
    text-style: italic;
    border-left: thick #334e68;
    padding-left: 1;
}

/* ===============================================
   RunMode Output Styling
   =============================================== */

.runmode-output {
    background: #162436;
    border: round #89cff0;
    padding: 1;
    margin: 1 0;
}

/* ===============================================
   Theme Variants (Future Implementation)
   =============================================== */

/* ===============================================
   Future Theme Templates
   =============================================== */

/* Nord Theme (for future implementation)
.theme-nord Screen {
    background: #2e3440;
    color: #eceff4;
}

.theme-nord Header,
.theme-nord Footer {
    background: #3b4252;
    color: #88c0d0;
}
*/

/* Dracula Theme (for future implementation)
.theme-dracula Screen {
    background: #282a36;
    color: #f8f8f2;
}

.theme-dracula Header,
.theme-dracula Footer {
    background: #44475a;
    color: #bd93f9;
}
*/

/* Tighten Markdown spacing inside tool sections to avoid large trailing gaps */
.tool-params-content Markdown,
.tool-result-content Markdown {
    margin: 0;
}

/* Keep code blocks compact inside cards */
.tool-params-content .code-block,
.tool-result-content .code-block {
    margin-top: 0;
    margin-bottom: 0;
}

/* Remove extra spacing added by Collapsible container body */
.tool-params-section > .content,
.tool-result-section > .content {
    padding: 0;
    margin: 0;
    min-height: 0;
}

/* Ensure Markdown inside collapsibles doesn't reserve space when empty */
.tool-params-content,
.tool-result-content {
    min-height: 0;
    height: auto;
}

/* Make Collapsible bodies shrink to fit content to avoid trailing whitespace */
.tool-params-section,
.tool-result-section,
.tool-execution {
    min-height: 0;
}